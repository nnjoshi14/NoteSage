# notesage-server/internal/cli
internal/cli/migrate.go:248:2: declared and not used: migrator
internal/cli/migrate.go:284:26: too many arguments in call to config.Load
	have (string)
	want ()
internal/cli/migrate.go:290:22: undefined: database.Connect
FAIL	notesage-server/internal/cli [build failed]
?   	notesage-server/internal/config	[no test files]
=== RUN   TestInitialize
=== RUN   TestInitialize/sqlite_in-memory
Successfully connected to sqlite database
=== RUN   TestInitialize/unsupported_database_type
--- PASS: TestInitialize (0.02s)
    --- PASS: TestInitialize/sqlite_in-memory (0.02s)
    --- PASS: TestInitialize/unsupported_database_type (0.00s)
=== RUN   TestMigrate
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.081ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.164ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.077ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.056ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.173ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:68
[0m[33m[0.046ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="users"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:68
[0m[33m[0.036ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="notes"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:68
[0m[33m[0.036ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="people"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:68
[0m[33m[0.028ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="todos"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:68
[0m[33m[0.030ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="connections"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:68
[0m[33m[0.027ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:73
[0m[33m[0.054ms] [34;1m[rows:1][0m SELECT count(*) FROM `migrations`
--- PASS: TestMigrate (0.01s)
=== RUN   TestUserCRUD
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.054ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.163ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.048ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.060ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.195ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:92
[0m[33m[3.999ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("719730d2-7640-4910-a9cb-e18b5f34e0e6","testuser","test@example.com","$2a$10$OZ1EtlBMTaGO3NdhBhzmIOkX59pWKJkYGi2IEijcu9qAD4nB7/S6O","user",true,NULL,"2025-08-09 09:29:22.833","2025-08-09 09:29:22.833")

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:98
[0m[33m[0.236ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE username = "testuser" ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:105
[0m[33m[0.467ms] [34;1m[rows:1][0m UPDATE `users` SET `username`="testuser",`email`="updated@example.com",`password`="$2a$10$OZ1EtlBMTaGO3NdhBhzmIOkX59pWKJkYGi2IEijcu9qAD4nB7/S6O",`role`="user",`is_active`=true,`last_login`=NULL,`created_at`="2025-08-09 09:29:22.833",`updated_at`="2025-08-09 09:29:22.835" WHERE `id` = "719730d2-7640-4910-a9cb-e18b5f34e0e6"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:110
[0m[33m[0.190ms] [34;1m[rows:1][0m SELECT * FROM `users` WHERE `users`.`id` = "719730d2-7640-4910-a9cb-e18b5f34e0e6" ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:115
[0m[33m[0.747ms] [34;1m[rows:1][0m DELETE FROM `users` WHERE `users`.`id` = "719730d2-7640-4910-a9cb-e18b5f34e0e6"

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:120 [35;1mrecord not found
[0m[33m[0.128ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE `users`.`id` = "719730d2-7640-4910-a9cb-e18b5f34e0e6" ORDER BY `users`.`id` LIMIT 1
--- PASS: TestUserCRUD (0.26s)
=== RUN   TestNoteCRUD
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.070ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.207ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.048ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.050ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.215ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:134 [35;1mUNIQUE constraint failed: users.username
[0m[33m[1.030ms] [34;1m[rows:0][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("4e3bd4c4-f456-4588-8c49-20fd593da225","testuser_note","test_note@example.com","password123","user",true,NULL,"2025-08-09 09:29:22.844","2025-08-09 09:29:22.844")
    database_test.go:135: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:135
        	Error:      	Received unexpected error:
        	            	UNIQUE constraint failed: users.username
        	Test:       	TestNoteCRUD
--- FAIL: TestNoteCRUD (0.01s)
=== RUN   TestPersonCRUD
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.040ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.156ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.037ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.118ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:202 [35;1mUNIQUE constraint failed: users.username
[0m[33m[0.971ms] [34;1m[rows:0][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("9b860fec-571c-4fec-8c11-c39b668fdec6","testuser_person","test_person@example.com","password123","user",true,NULL,"2025-08-09 09:29:22.849","2025-08-09 09:29:22.849")
    database_test.go:203: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:203
        	Error:      	Received unexpected error:
        	            	UNIQUE constraint failed: users.username
        	Test:       	TestPersonCRUD
--- FAIL: TestPersonCRUD (0.01s)
=== RUN   TestTodoCRUD
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.043ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.118ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.034ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.036ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.116ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:260 [35;1mUNIQUE constraint failed: users.username
[0m[33m[0.990ms] [34;1m[rows:0][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("3b8a3d31-55a3-496f-8415-6c3f6afa6652","testuser_todo","test_todo@example.com","password123","user",true,NULL,"2025-08-09 09:29:22.854","2025-08-09 09:29:22.854")
    database_test.go:261: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:261
        	Error:      	Received unexpected error:
        	            	UNIQUE constraint failed: users.username
        	Test:       	TestTodoCRUD
--- FAIL: TestTodoCRUD (0.00s)
=== RUN   TestConnectionCRUD
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.046ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.163ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.056ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.050ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.134ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:330 [35;1mUNIQUE constraint failed: users.username
[0m[33m[0.926ms] [34;1m[rows:0][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("e9503912-23ef-46cb-8ff4-c70eea58b8b6","testuser_connection","test_connection@example.com","password123","user",true,NULL,"2025-08-09 09:29:22.859","2025-08-09 09:29:22.859")
    database_test.go:331: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:331
        	Error:      	Received unexpected error:
        	            	UNIQUE constraint failed: users.username
        	Test:       	TestConnectionCRUD
--- FAIL: TestConnectionCRUD (0.01s)
=== RUN   TestForeignKeyConstraints
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.052ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.147ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.107ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:400
[0m[33m[1.535ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("3a154903-138b-4627-a55f-d5f460861863","testuser_fk","test_fk@example.com","password123","user",true,NULL,"2025-08-09 09:29:22.864","2025-08-09 09:29:22.864")

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:408
[0m[33m[0.930ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("59ec0f4d-2912-47d4-a61b-99757a1a750d","3a154903-138b-4627-a55f-d5f460861863","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:22.865","2025-08-09 09:29:22.865",1)

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:417
[0m[33m[0.604ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("cdf26335-e972-4758-bb9e-01c36df37870","59ec0f4d-2912-47d4-a61b-99757a1a750d","t1","Test todo",false,NULL,NULL,"2025-08-09 09:29:22.866","2025-08-09 09:29:22.866")

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:421
[0m[33m[1.022ms] [34;1m[rows:1][0m DELETE FROM `notes` WHERE `notes`.`id` = "59ec0f4d-2912-47d4-a61b-99757a1a750d"

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:426 [35;1mrecord not found
[0m[33m[0.117ms] [34;1m[rows:0][0m SELECT * FROM `todos` WHERE `todos`.`id` = "cdf26335-e972-4758-bb9e-01c36df37870" ORDER BY `todos`.`id` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/database_test.go:430
[0m[33m[0.563ms] [34;1m[rows:1][0m DELETE FROM `users` WHERE `users`.`id` = "3a154903-138b-4627-a55f-d5f460861863"
--- PASS: TestForeignKeyConstraints (0.01s)
=== RUN   TestNewSeeder
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.048ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.152ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.077ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.049ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[1.473ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestNewSeeder (0.01s)
=== RUN   TestSeeder_SeedUsers
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.046ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.136ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.032ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.032ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.110ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.812ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:33
[0m[33m[0.134ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:39 [35;1mrecord not found
[0m[33m[0.102ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" ORDER BY `users`.`id` LIMIT 1
    seeder_test.go:40: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:40
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestSeeder_SeedUsers
    seeder_test.go:41: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:41
        	Error:      	Not equal: 
        	            	expected: "testuser"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-testuser
        	            	+
        	Test:       	TestSeeder_SeedUsers
    seeder_test.go:42: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:42
        	Error:      	Not equal: 
        	            	expected: "test@example.com"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-test@example.com
        	            	+
        	Test:       	TestSeeder_SeedUsers

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.067ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:49
[0m[33m[0.144ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
--- FAIL: TestSeeder_SeedUsers (0.01s)
=== RUN   TestSeeder_SeedPeople
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.050ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.155ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.042ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.053ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.104ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.583ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.108ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:70
[0m[33m[0.065ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:76 [35;1mrecord not found
[0m[33m[0.211ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE name = "John Smith" ORDER BY `people`.`id` LIMIT 1
    seeder_test.go:77: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:77
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestSeeder_SeedPeople
    seeder_test.go:78: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:78
        	Error:      	Not equal: 
        	            	expected: "John Smith"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-John Smith
        	            	+
        	Test:       	TestSeeder_SeedPeople
    seeder_test.go:79: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:79
        	Error:      	Not equal: 
        	            	expected: "john.smith@company.com"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-john.smith@company.com
        	            	+
        	Test:       	TestSeeder_SeedPeople
    seeder_test.go:80: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:80
        	Error:      	Not equal: 
        	            	expected: "Tech Corp"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Tech Corp
        	            	+
        	Test:       	TestSeeder_SeedPeople

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.079ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:87
[0m[33m[0.056ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
--- FAIL: TestSeeder_SeedPeople (0.01s)
=== RUN   TestSeeder_SeedNotes
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.052ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.156ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.042ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.044ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.339ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[1.013ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.116ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:108
[0m[33m[0.066ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:114 [35;1mrecord not found
[0m[33m[0.396ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE title = "Project Planning Meeting" ORDER BY `notes`.`id` LIMIT 1
    seeder_test.go:115: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:115
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:116: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:116
        	Error:      	Not equal: 
        	            	expected: "Project Planning Meeting"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Project Planning Meeting
        	            	+
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:117: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:117
        	Error:      	Not equal: 
        	            	expected: "Meeting"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Meeting
        	            	+
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:118: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:118
        	Error:      	pq.StringArray(nil) does not contain "planning"
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:119: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:119
        	Error:      	Should be true
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:122: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:122
        	Error:      	Expected value not to be nil.
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:124: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:124
        	Error:      	Should be true
        	Test:       	TestSeeder_SeedNotes
    seeder_test.go:125: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:125
        	Error:      	Not equal: 
        	            	expected: string("doc")
        	            	actual  : <nil>(<nil>)
        	Test:       	TestSeeder_SeedNotes

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.237ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:132
[0m[33m[0.136ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
--- FAIL: TestSeeder_SeedNotes (0.01s)
=== RUN   TestSeeder_SeedTodos
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.059ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.192ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.051ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.457ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.333ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[1.837ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.590ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.552ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:301
[0m[33m[0.160ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:312
[0m[33m[0.353ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 2

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:317
[0m[33m[0.197ms] [34;1m[rows:1][0m SELECT * FROM `people` LIMIT 2
    seeder_test.go:153: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:153
        	Error:      	Received unexpected error:
        	            	need at least 2 people for seeding todos
        	Test:       	TestSeeder_SeedTodos

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:157
[0m[33m[0.195ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`
    seeder_test.go:159: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:159
        	Error:      	"0" is not greater than "0"
        	Test:       	TestSeeder_SeedTodos

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:163 [35;1mrecord not found
[0m[33m[0.187ms] [34;1m[rows:0][0m SELECT * FROM `todos` WHERE text = "Finalize project requirements" ORDER BY `todos`.`id` LIMIT 1
    seeder_test.go:164: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:164
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestSeeder_SeedTodos
    seeder_test.go:165: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:165
        	Error:      	Not equal: 
        	            	expected: "Finalize project requirements"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-Finalize project requirements
        	            	+
        	Test:       	TestSeeder_SeedTodos
    seeder_test.go:166: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:166
        	Error:      	Not equal: 
        	            	expected: "t1"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-t1
        	            	+
        	Test:       	TestSeeder_SeedTodos
    seeder_test.go:168: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:168
        	Error:      	Expected value not to be nil.
        	Test:       	TestSeeder_SeedTodos
    seeder_test.go:169: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:169
        	Error:      	Expected value not to be nil.
        	Test:       	TestSeeder_SeedTodos

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:173 [35;1mrecord not found
[0m[33m[0.208ms] [34;1m[rows:0][0m SELECT * FROM `todos` WHERE text = "Schedule follow-up meeting" ORDER BY `todos`.`id` LIMIT 1
    seeder_test.go:174: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:174
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestSeeder_SeedTodos
    seeder_test.go:175: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:175
        	Error:      	Should be true
        	Test:       	TestSeeder_SeedTodos

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:301
[0m[33m[0.168ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:312
[0m[33m[0.249ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 2

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:317
[0m[33m[0.150ms] [34;1m[rows:1][0m SELECT * FROM `people` LIMIT 2
    seeder_test.go:179: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:179
        	Error:      	Received unexpected error:
        	            	need at least 2 people for seeding todos
        	Test:       	TestSeeder_SeedTodos

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:182
[0m[33m[0.090ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`
--- FAIL: TestSeeder_SeedTodos (0.01s)
=== RUN   TestSeeder_SeedConnections
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.053ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.182ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.054ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.395ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[1.026ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[3.367ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.124ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.062ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:379
[0m[33m[0.081ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:390
[0m[33m[0.165ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:396
[0m[33m[0.260ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 3
    seeder_test.go:203: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:203
        	Error:      	Received unexpected error:
        	            	need at least 3 notes for seeding connections
        	Test:       	TestSeeder_SeedConnections

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:207
[0m[33m[0.115ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections`
    seeder_test.go:209: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:209
        	Error:      	"0" is not greater than "0"
        	Test:       	TestSeeder_SeedConnections

2025/08/09 14:59:22 [31;1m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:213 [35;1mrecord not found
[0m[33m[0.164ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE source_type = "note" AND target_type = "person" ORDER BY `connections`.`id` LIMIT 1
    seeder_test.go:214: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:214
        	Error:      	Received unexpected error:
        	            	record not found
        	Test:       	TestSeeder_SeedConnections
    seeder_test.go:215: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:215
        	Error:      	Not equal: 
        	            	expected: "note"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-note
        	            	+
        	Test:       	TestSeeder_SeedConnections
    seeder_test.go:216: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:216
        	Error:      	Not equal: 
        	            	expected: "person"
        	            	actual  : ""
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-person
        	            	+
        	Test:       	TestSeeder_SeedConnections
    seeder_test.go:217: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:217
        	Error:      	"0" is not greater than "0"
        	Test:       	TestSeeder_SeedConnections

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:379
[0m[33m[0.079ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:390
[0m[33m[0.195ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:396
[0m[33m[0.360ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 3
    seeder_test.go:221: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:221
        	Error:      	Received unexpected error:
        	            	need at least 3 notes for seeding connections
        	Test:       	TestSeeder_SeedConnections

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:224
[0m[33m[0.093ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections`
--- FAIL: TestSeeder_SeedConnections (0.02s)
=== RUN   TestSeeder_SeedAll
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.040ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.136ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.031ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.102ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
Seeding database...

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.656ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.051ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.044ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:301
[0m[33m[0.044ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:312
[0m[33m[0.170ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 2

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:317
[0m[33m[0.113ms] [34;1m[rows:1][0m SELECT * FROM `people` LIMIT 2
    seeder_test.go:237: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:237
        	Error:      	Received unexpected error:
        	            	failed to seed todos: need at least 2 people for seeding todos
        	Test:       	TestSeeder_SeedAll

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:250
[0m[33m[0.046ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:250
[0m[33m[0.039ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:250
[0m[33m[0.040ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:250
[0m[33m[0.037ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`
    seeder_test.go:252: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:252
        	Error:      	"0" is not greater than "0"
        	Test:       	TestSeeder_SeedAll
        	Messages:   	Table *models.Todo should have data

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:250
[0m[33m[0.049ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections`
    seeder_test.go:252: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:252
        	Error:      	"0" is not greater than "0"
        	Test:       	TestSeeder_SeedAll
        	Messages:   	Table *models.Connection should have data
--- FAIL: TestSeeder_SeedAll (0.01s)
=== RUN   TestSeeder_ClearAll
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.048ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.142ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.108ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.829ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding
Seeding database...

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.076ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.055ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.045ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:301
[0m[33m[0.040ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:312
[0m[33m[0.228ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 2

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:317
[0m[33m[0.103ms] [34;1m[rows:1][0m SELECT * FROM `people` LIMIT 2
    testhelper.go:46: Failed to seed test database: failed to seed todos: need at least 2 people for seeding todos
--- FAIL: TestSeeder_ClearAll (0.00s)
=== RUN   TestSeeder_ForeignKeyRelationships
Successfully connected to sqlite database

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.047ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.139ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.042ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.044ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.116ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
Seeding database...

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:56
[0m[33m[0.787ms] [34;1m[rows:1][0m SELECT count(*) FROM `users`
Users already exist, skipping user seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:99
[0m[33m[0.073ms] [34;1m[rows:1][0m SELECT count(*) FROM `people`
People already exist, skipping people seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:163
[0m[33m[0.093ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes`
Notes already exist, skipping notes seeding

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:301
[0m[33m[0.074ms] [34;1m[rows:1][0m SELECT count(*) FROM `todos`

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:312
[0m[33m[0.186ms] [34;1m[rows:2][0m SELECT * FROM `notes` LIMIT 2

2025/08/09 14:59:22 [32m/Users/nikhil/code/NoteSage/server/internal/database/seeder.go:317
[0m[33m[0.128ms] [34;1m[rows:1][0m SELECT * FROM `people` LIMIT 2
    seeder_test.go:297: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/database/seeder_test.go:297
        	Error:      	Received unexpected error:
        	            	failed to seed todos: need at least 2 people for seeding todos
        	Test:       	TestSeeder_ForeignKeyRelationships
--- FAIL: TestSeeder_ForeignKeyRelationships (0.00s)
FAIL
FAIL	notesage-server/internal/database	2.754s
=== RUN   TestAIHandler_GetAIStatus
=== RUN   TestAIHandler_GetAIStatus/disabled_AI_service
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.054ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.393ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.093ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.088ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.248ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
=== RUN   TestAIHandler_GetAIStatus/enabled_AI_service
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.161ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.609ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.265ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.068ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.127ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIHandler_GetAIStatus (0.01s)
    --- PASS: TestAIHandler_GetAIStatus/disabled_AI_service (0.01s)
    --- PASS: TestAIHandler_GetAIStatus/enabled_AI_service (0.01s)
=== RUN   TestAIHandler_ExtractTodos
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.047ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.154ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.050ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.039ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.120ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
=== RUN   TestAIHandler_ExtractTodos/valid_request
=== RUN   TestAIHandler_ExtractTodos/invalid_request_body
=== RUN   TestAIHandler_ExtractTodos/missing_content
--- PASS: TestAIHandler_ExtractTodos (0.01s)
    --- PASS: TestAIHandler_ExtractTodos/valid_request (0.00s)
    --- PASS: TestAIHandler_ExtractTodos/invalid_request_body (0.00s)
    --- PASS: TestAIHandler_ExtractTodos/missing_content (0.00s)
=== RUN   TestAIHandler_AnalyzePeople
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.091ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.276ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.465ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.751ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.694ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/ai_test.go:233
[0m[33m[1.964ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("85659a11-beae-48b8-9bb7-06ad700797c2","testuser_handler_85659a11","test_handler_85659a11@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:24.725","2025-08-09 09:29:24.725")

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/ai_test.go:242
[0m[33m[1.590ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("5698e839-02e4-422f-97ee-bd0d7e02fdb6","85659a11-beae-48b8-9bb7-06ad700797c2","John Doe","john@example.com","","","","","","","2025-08-09 09:29:24.725","2025-08-09 09:29:24.725")
=== RUN   TestAIHandler_AnalyzePeople/valid_request

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:163
[0m[33m[0.683ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "85659a11-beae-48b8-9bb7-06ad700797c2"
=== RUN   TestAIHandler_AnalyzePeople/invalid_request_body
--- PASS: TestAIHandler_AnalyzePeople (0.02s)
    --- PASS: TestAIHandler_AnalyzePeople/valid_request (0.00s)
    --- PASS: TestAIHandler_AnalyzePeople/invalid_request_body (0.00s)
=== RUN   TestAIHandler_AnalyzePeople_NoAuth
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.288ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[3.016ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.075ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.178ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.138ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIHandler_AnalyzePeople_NoAuth (0.01s)
=== RUN   TestAIHandler_GenerateInsights
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.041ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.077ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.027ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.073ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.211ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/ai_test.go:358
[0m[33m[2.188ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("682d0a4b-514a-4b55-a6b7-274677475dfd","testuser_insights_682d0a4b","test_insights_682d0a4b@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:24.745","2025-08-09 09:29:24.745")

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/ai_test.go:367
[0m[33m[4.415ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("47ad67ee-5e78-4cbf-8db1-95a57ca12ed7","682d0a4b-514a-4b55-a6b7-274677475dfd","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:24.747","2025-08-09 09:29:24.747",1)
=== RUN   TestAIHandler_GenerateInsights/default_limit

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:629
[0m[33m[1.535ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY updated_at DESC LIMIT 50

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:635
[0m[33m[0.696ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:645
[0m[33m[0.377ms] [34;1m[rows:0][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY todos.created_at DESC LIMIT 50

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:654
[0m[33m[0.149ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY created_at DESC LIMIT 50
=== RUN   TestAIHandler_GenerateInsights/custom_limit

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:629
[0m[33m[0.346ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY updated_at DESC LIMIT 10

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:635
[0m[33m[0.104ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:645
[0m[33m[0.890ms] [34;1m[rows:0][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY todos.created_at DESC LIMIT 10

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:654
[0m[33m[0.850ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY created_at DESC LIMIT 10
=== RUN   TestAIHandler_GenerateInsights/invalid_limit_ignored

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:629
[0m[33m[4.211ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY updated_at DESC LIMIT 50

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:635
[0m[33m[0.202ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:645
[0m[33m[0.249ms] [34;1m[rows:0][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY todos.created_at DESC LIMIT 50

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:654
[0m[33m[0.149ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "682d0a4b-514a-4b55-a6b7-274677475dfd" ORDER BY created_at DESC LIMIT 50
--- PASS: TestAIHandler_GenerateInsights (0.03s)
    --- PASS: TestAIHandler_GenerateInsights/default_limit (0.01s)
    --- PASS: TestAIHandler_GenerateInsights/custom_limit (0.01s)
    --- PASS: TestAIHandler_GenerateInsights/invalid_limit_ignored (0.01s)
=== RUN   TestAIHandler_GenerateInsights_NoAuth
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.049ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.116ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.030ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.028ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.083ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIHandler_GenerateInsights_NoAuth (0.00s)
=== RUN   TestAIHandler_ExtractTodosFromNote
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.070ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.261ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.074ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.059ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.142ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
=== RUN   TestAIHandler_ExtractTodosFromNote/valid_request
=== RUN   TestAIHandler_ExtractTodosFromNote/invalid_note_ID
--- PASS: TestAIHandler_ExtractTodosFromNote (0.02s)
    --- PASS: TestAIHandler_ExtractTodosFromNote/valid_request (0.00s)
    --- PASS: TestAIHandler_ExtractTodosFromNote/invalid_note_ID (0.00s)
=== RUN   TestAIHandler_AnalyzePeopleInNote
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.076ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.027ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.025ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.077ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/ai_test.go:532
[0m[33m[0.758ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("20646c9e-914b-4b71-b2ae-7ac692a78edd","testuser_note_20646c9e","test_note_20646c9e@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:24.792","2025-08-09 09:29:24.792")

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/ai_test.go:541
[0m[33m[6.267ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("bdcc1fae-04cb-4076-96ac-e7e99a73cf51","20646c9e-914b-4b71-b2ae-7ac692a78edd","John Doe","john@example.com","","","","","","","2025-08-09 09:29:24.793","2025-08-09 09:29:24.793")
=== RUN   TestAIHandler_AnalyzePeopleInNote/valid_request

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:163
[0m[33m[1.346ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "20646c9e-914b-4b71-b2ae-7ac692a78edd"
=== RUN   TestAIHandler_AnalyzePeopleInNote/invalid_note_ID
--- PASS: TestAIHandler_AnalyzePeopleInNote (0.01s)
    --- PASS: TestAIHandler_AnalyzePeopleInNote/valid_request (0.00s)
    --- PASS: TestAIHandler_AnalyzePeopleInNote/invalid_note_ID (0.00s)
=== RUN   TestAIHandler_DisabledService
Successfully connected to sqlite database

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.243ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.353ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.127ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.113ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:24 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.210ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIHandler_DisabledService (0.00s)
=== RUN   TestAuthHandlerSuite
=== RUN   TestAuthHandlerSuite/TestAdminCreateUser

2025/08/09 14:59:24 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:312 [35;1mrecord not found
[0m[33m[0.770ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "newuser" OR email = "newuser@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestChangePassword

2025/08/09 14:59:25 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.133ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestGetProfile

2025/08/09 14:59:25 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.228ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestGetUsers
=== RUN   TestAuthHandlerSuite/TestLogin

2025/08/09 14:59:25 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.168ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestLoginInvalidCredentials

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:128 [35;1mrecord not found
[0m[33m[0.603ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "nonexistent" OR email = "nonexistent" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestLoginWithEmail

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.167ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestNonAdminCannotCreateUser

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.136ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "user" OR email = "user@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestRegister

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.204ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestRegisterDuplicateUser

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.354ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1
=== RUN   TestAuthHandlerSuite/TestUpdateProfile

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:76 [35;1mrecord not found
[0m[33m[0.127ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE username = "testuser" OR email = "test@example.com" ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:26 [31;1m/Users/nikhil/code/NoteSage/server/internal/handlers/auth.go:209 [35;1mrecord not found
[0m[33m[0.055ms] [34;1m[rows:0][0m SELECT * FROM `users` WHERE email = "newemail@example.com" AND id != "6ea5d471-3713-4ab3-9e66-5d6495856d14" ORDER BY `users`.`id` LIMIT 1
--- PASS: TestAuthHandlerSuite (2.07s)
    --- PASS: TestAuthHandlerSuite/TestAdminCreateUser (0.22s)
    --- PASS: TestAuthHandlerSuite/TestChangePassword (0.44s)
    --- PASS: TestAuthHandlerSuite/TestGetProfile (0.13s)
    --- PASS: TestAuthHandlerSuite/TestGetUsers (0.13s)
    --- PASS: TestAuthHandlerSuite/TestLogin (0.35s)
    --- PASS: TestAuthHandlerSuite/TestLoginInvalidCredentials (0.00s)
    --- PASS: TestAuthHandlerSuite/TestLoginWithEmail (0.22s)
    --- PASS: TestAuthHandlerSuite/TestNonAdminCannotCreateUser (0.18s)
    --- PASS: TestAuthHandlerSuite/TestRegister (0.13s)
    --- PASS: TestAuthHandlerSuite/TestRegisterDuplicateUser (0.15s)
    --- PASS: TestAuthHandlerSuite/TestUpdateProfile (0.09s)
=== RUN   TestGraphHandler_GetGraph
Successfully connected to sqlite database

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.062ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.110ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.040ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.343ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:34
[0m[33m[1.644ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("2ab52fc3-58fd-4a13-a495-a0f60609f548","testuser_2ab52fc3","test_2ab52fc3@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:26.888","2025-08-09 09:29:26.888")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:43
[0m[33m[0.707ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("be14e8dd-4e91-4d6c-8b1b-66ce7244e545","2ab52fc3-58fd-4a13-a495-a0f60609f548","John Smith","john@example.com","","","","","","","2025-08-09 09:29:26.889","2025-08-09 09:29:26.889")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:66
[0m[33m[0.595ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("bfd6f7d2-7d73-485e-bbb3-bdb89e403147","2ab52fc3-58fd-4a13-a495-a0f60609f548","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Meeting with @John Smith was productive.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:26.89","2025-08-09 09:29:26.89",1)

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:77
[0m[33m[0.381ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("2f216592-e0e9-4d0f-9eb4-a0f9bef08deb","2ab52fc3-58fd-4a13-a495-a0f60609f548","bfd6f7d2-7d73-485e-bbb3-bdb89e403147","note","be14e8dd-4e91-4d6c-8b1b-66ce7244e545","person",1,"2025-08-09 09:29:26.891","2025-08-09 09:29:26.891")
=== RUN   TestGraphHandler_GetGraph/get_full_graph

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[0.180ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548" AND is_archived = false

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[0.071ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548" AND (source_id = "bfd6f7d2-7d73-485e-bbb3-bdb89e403147" OR target_id = "bfd6f7d2-7d73-485e-bbb3-bdb89e403147")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.090ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:224
[0m[33m[0.060ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548" AND (source_id = "be14e8dd-4e91-4d6c-8b1b-66ce7244e545" OR target_id = "be14e8dd-4e91-4d6c-8b1b-66ce7244e545")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[0.074ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548"
=== RUN   TestGraphHandler_GetGraph/filter_by_category

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[0.133ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE (user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548" AND is_archived = false) AND category = "Meeting"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[0.065ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548" AND (source_id = "bfd6f7d2-7d73-485e-bbb3-bdb89e403147" OR target_id = "bfd6f7d2-7d73-485e-bbb3-bdb89e403147")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.086ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:224
[0m[33m[0.059ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548" AND (source_id = "be14e8dd-4e91-4d6c-8b1b-66ce7244e545" OR target_id = "be14e8dd-4e91-4d6c-8b1b-66ce7244e545")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[0.072ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "2ab52fc3-58fd-4a13-a495-a0f60609f548"
--- PASS: TestGraphHandler_GetGraph (0.01s)
    --- PASS: TestGraphHandler_GetGraph/get_full_graph (0.00s)
    --- PASS: TestGraphHandler_GetGraph/filter_by_category (0.00s)
=== RUN   TestGraphHandler_SearchGraph
Successfully connected to sqlite database

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.031ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.085ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.099ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.248ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.192ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:34
[0m[33m[1.696ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("67d76169-c4df-49cb-a240-834ef2bafe5e","testuser_67d76169","test_67d76169@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:26.9","2025-08-09 09:29:26.9")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:43
[0m[33m[2.430ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("bc38cfb2-3cc8-4660-88ab-d795751c81da","67d76169-c4df-49cb-a240-834ef2bafe5e","John Smith","john@example.com","","","","","","","2025-08-09 09:29:26.901","2025-08-09 09:29:26.901")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:66
[0m[33m[3.048ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("d3cb3521-19be-4322-a77a-60a3c44f77b7","67d76169-c4df-49cb-a240-834ef2bafe5e","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Meeting with @John Smith was productive.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:26.904","2025-08-09 09:29:26.904",1)

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:77
[0m[33m[1.402ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("cc526fc2-e058-4884-b662-8562b0b90943","67d76169-c4df-49cb-a240-834ef2bafe5e","d3cb3521-19be-4322-a77a-60a3c44f77b7","note","bc38cfb2-3cc8-4660-88ab-d795751c81da","person",1,"2025-08-09 09:29:26.907","2025-08-09 09:29:26.907")
=== RUN   TestGraphHandler_SearchGraph/search_for_meeting

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:276
[0m[33m[0.554ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND is_archived = false AND (LOWER(title) LIKE "%meeting%" OR LOWER(CAST(content AS TEXT)) LIKE "%meeting%")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:283
[0m[33m[0.851ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND (source_id = "d3cb3521-19be-4322-a77a-60a3c44f77b7" OR target_id = "d3cb3521-19be-4322-a77a-60a3c44f77b7")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:309
[0m[33m[0.383ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND (LOWER(name) LIKE "%meeting%" OR LOWER(company) LIKE "%meeting%" OR LOWER(title) LIKE "%meeting%")
=== RUN   TestGraphHandler_SearchGraph/search_for_person

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:309
[0m[33m[0.300ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND (LOWER(name) LIKE "%john%" OR LOWER(company) LIKE "%john%" OR LOWER(title) LIKE "%john%")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:316
[0m[33m[0.241ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND (source_id = "bc38cfb2-3cc8-4660-88ab-d795751c81da" OR target_id = "bc38cfb2-3cc8-4660-88ab-d795751c81da")
=== RUN   TestGraphHandler_SearchGraph/search_with_no_query
=== RUN   TestGraphHandler_SearchGraph/search_with_no_results

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:276
[0m[33m[0.820ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND is_archived = false AND (LOWER(title) LIKE "%nonexistent%" OR LOWER(CAST(content AS TEXT)) LIKE "%nonexistent%")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:309
[0m[33m[1.867ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "67d76169-c4df-49cb-a240-834ef2bafe5e" AND (LOWER(name) LIKE "%nonexistent%" OR LOWER(company) LIKE "%nonexistent%" OR LOWER(title) LIKE "%nonexistent%")
--- PASS: TestGraphHandler_SearchGraph (0.03s)
    --- PASS: TestGraphHandler_SearchGraph/search_for_meeting (0.00s)
    --- PASS: TestGraphHandler_SearchGraph/search_for_person (0.00s)
    --- PASS: TestGraphHandler_SearchGraph/search_with_no_query (0.00s)
    --- PASS: TestGraphHandler_SearchGraph/search_with_no_results (0.00s)
=== RUN   TestGraphHandler_GetNodeConnections
Successfully connected to sqlite database

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.064ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.473ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.114ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.090ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.223ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:34
[0m[33m[1.407ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("97a18a2e-084f-41ab-a02e-627d00888b10","testuser_97a18a2e","test_97a18a2e@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:26.925","2025-08-09 09:29:26.925")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:43
[0m[33m[0.290ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("d8fea5db-4326-43b0-be9d-c1afa230a0b8","97a18a2e-084f-41ab-a02e-627d00888b10","John Smith","john@example.com","","","","","","","2025-08-09 09:29:26.925","2025-08-09 09:29:26.925")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:66
[0m[33m[0.388ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("13be3b96-d708-4d93-b575-56413a4b77b4","97a18a2e-084f-41ab-a02e-627d00888b10","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Meeting with @John Smith was productive.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:26.926","2025-08-09 09:29:26.926",1)

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:77
[0m[33m[1.448ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("32f4878c-2068-4e22-8115-82e629fabb33","97a18a2e-084f-41ab-a02e-627d00888b10","13be3b96-d708-4d93-b575-56413a4b77b4","note","d8fea5db-4326-43b0-be9d-c1afa230a0b8","person",1,"2025-08-09 09:29:26.926","2025-08-09 09:29:26.926")
=== RUN   TestGraphHandler_GetNodeConnections/get_note_connections

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:336
[0m[33m[0.256ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "97a18a2e-084f-41ab-a02e-627d00888b10" AND (source_id = "13be3b96-d708-4d93-b575-56413a4b77b4" OR target_id = "13be3b96-d708-4d93-b575-56413a4b77b4")
=== RUN   TestGraphHandler_GetNodeConnections/get_person_connections

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:336
[0m[33m[0.229ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "97a18a2e-084f-41ab-a02e-627d00888b10" AND (source_id = "d8fea5db-4326-43b0-be9d-c1afa230a0b8" OR target_id = "d8fea5db-4326-43b0-be9d-c1afa230a0b8")
=== RUN   TestGraphHandler_GetNodeConnections/invalid_node_ID

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:336
[0m[33m[0.163ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "97a18a2e-084f-41ab-a02e-627d00888b10" AND (source_id = "308cf87b-6668-40b9-8149-5b54a35b72bd" OR target_id = "308cf87b-6668-40b9-8149-5b54a35b72bd")
--- PASS: TestGraphHandler_GetNodeConnections (0.01s)
    --- PASS: TestGraphHandler_GetNodeConnections/get_note_connections (0.00s)
    --- PASS: TestGraphHandler_GetNodeConnections/get_person_connections (0.00s)
    --- PASS: TestGraphHandler_GetNodeConnections/invalid_node_ID (0.00s)
=== RUN   TestGraphHandler_DetectConnections
Successfully connected to sqlite database

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.073ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.165ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.057ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.060ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[1.028ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:34
[0m[33m[4.392ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("2a27a4e1-526b-45b8-8619-84d9f055383f","testuser_2a27a4e1","test_2a27a4e1@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:26.937","2025-08-09 09:29:26.937")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:43
[0m[33m[1.564ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("20f2bfc6-d31b-471f-a67a-94bba808e90c","2a27a4e1-526b-45b8-8619-84d9f055383f","John Smith","john@example.com","","","","","","","2025-08-09 09:29:26.938","2025-08-09 09:29:26.938")

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:66
[0m[33m[1.701ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("e26d55b8-8c0a-4def-8964-e5b0c9b8c524","2a27a4e1-526b-45b8-8619-84d9f055383f","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Meeting with @John Smith was productive.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:26.94","2025-08-09 09:29:26.94",1)

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:77
[0m[33m[0.597ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("869fd952-b437-441c-909a-05c68459d6e8","2a27a4e1-526b-45b8-8619-84d9f055383f","e26d55b8-8c0a-4def-8964-e5b0c9b8c524","note","20f2bfc6-d31b-471f-a67a-94bba808e90c","person",1,"2025-08-09 09:29:26.942","2025-08-09 09:29:26.942")
=== RUN   TestGraphHandler_DetectConnections/detect_person_mention

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.165ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "2a27a4e1-526b-45b8-8619-84d9f055383f"

2025/08/09 14:59:26 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.133ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "2a27a4e1-526b-45b8-8619-84d9f055383f" AND is_archived = false
--- FAIL: TestGraphHandler_DetectConnections (0.01s)
    --- FAIL: TestGraphHandler_DetectConnections/detect_person_mention (0.00s)
panic: interface conversion: interface {} is nil, not []interface {} [recovered]
	panic: interface conversion: interface {} is nil, not []interface {}

goroutine 213 [running]:
testing.tRunner.func1.2({0x108be6d20, 0xc000701200})
	/usr/local/go/src/testing/testing.go:1734 +0x21c
testing.tRunner.func1()
	/usr/local/go/src/testing/testing.go:1737 +0x35e
panic({0x108be6d20?, 0xc000701200?})
	/usr/local/go/src/runtime/panic.go:792 +0x132
notesage-server/internal/handlers.TestGraphHandler_DetectConnections.func1(0xc0006e0a80, 0xc000701170)
	/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:393 +0x23f
notesage-server/internal/handlers.TestGraphHandler_DetectConnections.func4(0xc0006e0a80)
	/Users/nikhil/code/NoteSage/server/internal/handlers/graph_test.go:465 +0x48c
testing.tRunner(0xc0006e0a80, 0xc0002306e0)
	/usr/local/go/src/testing/testing.go:1792 +0xf4
created by testing.(*T).Run in goroutine 193
	/usr/local/go/src/testing/testing.go:1851 +0x413
FAIL	notesage-server/internal/handlers	4.784s
=== RUN   TestAuthMiddleware
=== RUN   TestAuthMiddleware/No_Authorization_Header
=== RUN   TestAuthMiddleware/Invalid_Bearer_Format
=== RUN   TestAuthMiddleware/Invalid_Token
=== RUN   TestAuthMiddleware/Valid_Token
--- PASS: TestAuthMiddleware (0.00s)
    --- PASS: TestAuthMiddleware/No_Authorization_Header (0.00s)
    --- PASS: TestAuthMiddleware/Invalid_Bearer_Format (0.00s)
    --- PASS: TestAuthMiddleware/Invalid_Token (0.00s)
    --- PASS: TestAuthMiddleware/Valid_Token (0.00s)
=== RUN   TestRequireRole
=== RUN   TestRequireRole/User_accessing_user_endpoint
=== RUN   TestRequireRole/User_accessing_admin_endpoint
=== RUN   TestRequireRole/Admin_accessing_user_endpoint
=== RUN   TestRequireRole/Admin_accessing_admin_endpoint
--- PASS: TestRequireRole (0.00s)
    --- PASS: TestRequireRole/User_accessing_user_endpoint (0.00s)
    --- PASS: TestRequireRole/User_accessing_admin_endpoint (0.00s)
    --- PASS: TestRequireRole/Admin_accessing_user_endpoint (0.00s)
    --- PASS: TestRequireRole/Admin_accessing_admin_endpoint (0.00s)
=== RUN   TestRequireAdmin
=== RUN   TestRequireAdmin/User_accessing_admin_endpoint
=== RUN   TestRequireAdmin/Admin_accessing_admin_endpoint
--- PASS: TestRequireAdmin (0.00s)
    --- PASS: TestRequireAdmin/User_accessing_admin_endpoint (0.00s)
    --- PASS: TestRequireAdmin/Admin_accessing_admin_endpoint (0.00s)
=== RUN   TestCORS
--- PASS: TestCORS (0.00s)
PASS
ok  	notesage-server/internal/middleware	(cached)
=== RUN   TestNewMigrator
--- PASS: TestNewMigrator (0.00s)
=== RUN   TestMigrator_Migrate
Running migration 001: Create initial tables
Migration 001 completed successfully
Running migration 002: Add indexes and constraints
Migration 002 completed successfully
Running migration 003: Add unique constraint for todos
Migration 003 completed successfully
Running migration 004: Add user role and activity fields
Migration 004 completed successfully
--- PASS: TestMigrator_Migrate (0.07s)
=== RUN   TestMigrator_Status
Running migration 001: Create initial tables
Migration 001 completed successfully
Running migration 002: Add indexes and constraints
Migration 002 completed successfully
Running migration 003: Add unique constraint for todos
Migration 003 completed successfully
Running migration 004: Add user role and activity fields
Migration 004 completed successfully
Migration Status:
================
✓ 001: Create initial tables (applied at 2025-08-09 09:15:59)
✓ 002: Add indexes and constraints (applied at 2025-08-09 09:15:59)
✓ 003: Add unique constraint for todos (applied at 2025-08-09 09:15:59)
✓ 004: Add user role and activity fields (applied at 2025-08-09 09:15:59)
--- PASS: TestMigrator_Status (0.02s)
=== RUN   TestMigrator_Rollback
Running migration 001: Create initial tables
Migration 001 completed successfully
Running migration 002: Add indexes and constraints
Migration 002 completed successfully
Running migration 003: Add unique constraint for todos
Migration 003 completed successfully
Running migration 004: Add user role and activity fields
Migration 004 completed successfully
Rolling back migration 004: Add user role and activity fields
Rollback 004 completed successfully
--- PASS: TestMigrator_Rollback (0.02s)
=== RUN   TestMigrator_RollbackNoMigrations

2025/08/09 09:15:59 [31;1m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:138 [35;1mrecord not found
[0m[33m[0.222ms] [34;1m[rows:0][0m SELECT * FROM `migrations` ORDER BY applied_at DESC,`migrations`.`id` LIMIT 1
--- PASS: TestMigrator_RollbackNoMigrations (0.00s)
=== RUN   TestGetAllMigrations
--- PASS: TestGetAllMigrations (0.00s)
=== RUN   TestMigration001
--- PASS: TestMigration001 (0.02s)
=== RUN   TestMigration002
--- PASS: TestMigration002 (0.02s)
=== RUN   TestMigration003
--- PASS: TestMigration003 (0.01s)
PASS
ok  	notesage-server/internal/migrations	(cached)
=== RUN   TestUser_Validate
=== RUN   TestUser_Validate/valid_user
=== RUN   TestUser_Validate/missing_username
=== RUN   TestUser_Validate/missing_email
=== RUN   TestUser_Validate/missing_password
--- PASS: TestUser_Validate (0.00s)
    --- PASS: TestUser_Validate/valid_user (0.00s)
    --- PASS: TestUser_Validate/missing_username (0.00s)
    --- PASS: TestUser_Validate/missing_email (0.00s)
    --- PASS: TestUser_Validate/missing_password (0.00s)
=== RUN   TestUser_BeforeCreate
--- PASS: TestUser_BeforeCreate (0.00s)
=== RUN   TestNote_Validate
=== RUN   TestNote_Validate/valid_note
=== RUN   TestNote_Validate/missing_user_id
=== RUN   TestNote_Validate/missing_title
--- PASS: TestNote_Validate (0.00s)
    --- PASS: TestNote_Validate/valid_note (0.00s)
    --- PASS: TestNote_Validate/missing_user_id (0.00s)
    --- PASS: TestNote_Validate/missing_title (0.00s)
=== RUN   TestNote_BeforeCreate
--- PASS: TestNote_BeforeCreate (0.00s)
=== RUN   TestPerson_Validate
=== RUN   TestPerson_Validate/valid_person
=== RUN   TestPerson_Validate/missing_user_id
=== RUN   TestPerson_Validate/missing_name
--- PASS: TestPerson_Validate (0.00s)
    --- PASS: TestPerson_Validate/valid_person (0.00s)
    --- PASS: TestPerson_Validate/missing_user_id (0.00s)
    --- PASS: TestPerson_Validate/missing_name (0.00s)
=== RUN   TestTodo_Validate
=== RUN   TestTodo_Validate/valid_todo
=== RUN   TestTodo_Validate/missing_note_id
=== RUN   TestTodo_Validate/missing_todo_id
=== RUN   TestTodo_Validate/missing_text
--- PASS: TestTodo_Validate (0.00s)
    --- PASS: TestTodo_Validate/valid_todo (0.00s)
    --- PASS: TestTodo_Validate/missing_note_id (0.00s)
    --- PASS: TestTodo_Validate/missing_todo_id (0.00s)
    --- PASS: TestTodo_Validate/missing_text (0.00s)
=== RUN   TestJSONB_Value
=== RUN   TestJSONB_Value/valid_jsonb
=== RUN   TestJSONB_Value/nil_jsonb
=== RUN   TestJSONB_Value/empty_jsonb
--- PASS: TestJSONB_Value (0.00s)
    --- PASS: TestJSONB_Value/valid_jsonb (0.00s)
    --- PASS: TestJSONB_Value/nil_jsonb (0.00s)
    --- PASS: TestJSONB_Value/empty_jsonb (0.00s)
=== RUN   TestJSONB_Scan
=== RUN   TestJSONB_Scan/valid_json_bytes
=== RUN   TestJSONB_Scan/nil_value
=== RUN   TestJSONB_Scan/invalid_type
=== RUN   TestJSONB_Scan/invalid_json
--- PASS: TestJSONB_Scan (0.00s)
    --- PASS: TestJSONB_Scan/valid_json_bytes (0.00s)
    --- PASS: TestJSONB_Scan/nil_value (0.00s)
    --- PASS: TestJSONB_Scan/invalid_type (0.00s)
    --- PASS: TestJSONB_Scan/invalid_json (0.00s)
=== RUN   TestTableNames
=== RUN   TestTableNames/users
=== RUN   TestTableNames/notes
=== RUN   TestTableNames/people
=== RUN   TestTableNames/todos
=== RUN   TestTableNames/connections
=== RUN   TestTableNames/migrations
--- PASS: TestTableNames (0.00s)
    --- PASS: TestTableNames/users (0.00s)
    --- PASS: TestTableNames/notes (0.00s)
    --- PASS: TestTableNames/people (0.00s)
    --- PASS: TestTableNames/todos (0.00s)
    --- PASS: TestTableNames/connections (0.00s)
    --- PASS: TestTableNames/migrations (0.00s)
=== RUN   TestMigration_BeforeCreate
--- PASS: TestMigration_BeforeCreate (0.00s)
PASS
ok  	notesage-server/internal/models	(cached)
?   	notesage-server/internal/router	[no test files]
=== RUN   TestNewAIService
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.052ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.108ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.034ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.023ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.395ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
=== RUN   TestNewAIService/nil_config_should_disable_service
=== RUN   TestNewAIService/empty_API_key_should_disable_service
=== RUN   TestNewAIService/valid_config_should_enable_service
--- PASS: TestNewAIService (0.01s)
    --- PASS: TestNewAIService/nil_config_should_disable_service (0.00s)
    --- PASS: TestNewAIService/empty_API_key_should_disable_service (0.00s)
    --- PASS: TestNewAIService/valid_config_should_enable_service (0.00s)
=== RUN   TestAIService_ExtractTextFromContent
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.077ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.246ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.045ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.068ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.216ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
=== RUN   TestAIService_ExtractTextFromContent/simple_text_content
=== RUN   TestAIService_ExtractTextFromContent/multiple_paragraphs
=== RUN   TestAIService_ExtractTextFromContent/empty_content
--- PASS: TestAIService_ExtractTextFromContent (0.00s)
    --- PASS: TestAIService_ExtractTextFromContent/simple_text_content (0.00s)
    --- PASS: TestAIService_ExtractTextFromContent/multiple_paragraphs (0.00s)
    --- PASS: TestAIService_ExtractTextFromContent/empty_content (0.00s)
=== RUN   TestAIService_ExtractTodosFromNote_Disabled
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.175ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.369ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.080ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.076ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.184ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_ExtractTodosFromNote_Disabled (0.01s)
=== RUN   TestAIService_CallOpenAI_MockServer
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.029ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.086ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.028ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.022ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.066ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_CallOpenAI_MockServer (0.00s)
=== RUN   TestAIService_CallGemini_MockServer
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.048ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.381ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.125ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.159ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.240ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_CallGemini_MockServer (0.01s)
=== RUN   TestAIService_CallGrok_MockServer
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.029ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.101ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.023ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.072ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_CallGrok_MockServer (0.01s)
=== RUN   TestAIService_ExtractTodosFromNote_WithMockAI
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.129ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.390ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.077ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.065ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.206ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_ExtractTodosFromNote_WithMockAI (0.00s)
=== RUN   TestAIService_AnalyzePeopleMentions_WithMockAI
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.029ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.069ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.027ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.022ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.074ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:361
[0m[33m[2.849ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("a4a6f7f9-30ab-43c4-a33c-d3d6ba9eb38a","testuser_people_a4a6f7f9","test_people_a4a6f7f9@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.677","2025-08-09 09:29:27.677")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:377
[0m[33m[0.860ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("13f98e44-780b-4e3a-bfda-c6807db1ddff","a4a6f7f9-30ab-43c4-a33c-d3d6ba9eb38a","John Doe","john@example.com","","","","","","","2025-08-09 09:29:27.679","2025-08-09 09:29:27.679")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:378
[0m[33m[1.975ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("d55a41f0-e2ba-4058-9e22-8c9a34887b78","a4a6f7f9-30ab-43c4-a33c-d3d6ba9eb38a","Jane Smith","jane@example.com","","","","","","","2025-08-09 09:29:27.68","2025-08-09 09:29:27.68")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:163
[0m[33m[0.740ms] [34;1m[rows:2][0m SELECT * FROM `people` WHERE user_id = "a4a6f7f9-30ab-43c4-a33c-d3d6ba9eb38a"
--- PASS: TestAIService_AnalyzePeopleMentions_WithMockAI (0.01s)
=== RUN   TestAIService_GenerateInsights_WithMockAI
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.133ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.183ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.084ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.054ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.086ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:470
[0m[33m[0.654ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("28461623-0677-4c66-8a72-671266e76d49","testuser_insights_28461623","test_insights_28461623@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.691","2025-08-09 09:29:27.691")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:479
[0m[33m[0.359ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("e5505449-ba0d-453f-8373-7dde1bf38ba3","28461623-0677-4c66-8a72-671266e76d49","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.691","2025-08-09 09:29:27.691",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:629
[0m[33m[0.145ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "28461623-0677-4c66-8a72-671266e76d49" ORDER BY updated_at DESC LIMIT 10

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:635
[0m[33m[0.069ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "28461623-0677-4c66-8a72-671266e76d49"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:645
[0m[33m[0.164ms] [34;1m[rows:0][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "28461623-0677-4c66-8a72-671266e76d49" ORDER BY todos.created_at DESC LIMIT 10

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:654
[0m[33m[0.078ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "28461623-0677-4c66-8a72-671266e76d49" ORDER BY created_at DESC LIMIT 10
--- PASS: TestAIService_GenerateInsights_WithMockAI (0.01s)
=== RUN   TestAIService_GatherUserData
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.042ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.104ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.034ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.164ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.626ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:558
[0m[33m[2.949ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("eabfe9f0-0165-4bed-b403-6ce6b553db34","testuser_gather_eabfe9f0","test_gather_eabfe9f0@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.701","2025-08-09 09:29:27.701")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:567
[0m[33m[1.516ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("4179681f-1d6c-4489-a2f2-9281170f13bf","eabfe9f0-0165-4bed-b403-6ce6b553db34","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.703","2025-08-09 09:29:27.703",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:574
[0m[33m[0.526ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("be9fd7de-0419-43db-9670-797a9cc1cca0","eabfe9f0-0165-4bed-b403-6ce6b553db34","Test Person","","","","","","","","2025-08-09 09:29:27.704","2025-08-09 09:29:27.704")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:582
[0m[33m[0.906ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("be1c59ea-9ca5-4618-877c-3219a11a4b99","4179681f-1d6c-4489-a2f2-9281170f13bf","t1","Test todo",false,NULL,NULL,"2025-08-09 09:29:27.705","2025-08-09 09:29:27.705")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service_test.go:592
[0m[33m[0.788ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("e73f019d-4d2e-4b78-aa97-0cf0f761e39d","eabfe9f0-0165-4bed-b403-6ce6b553db34","4179681f-1d6c-4489-a2f2-9281170f13bf","note","be9fd7de-0419-43db-9670-797a9cc1cca0","person",1,"2025-08-09 09:29:27.706","2025-08-09 09:29:27.706")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:629
[0m[33m[0.328ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "eabfe9f0-0165-4bed-b403-6ce6b553db34" ORDER BY updated_at DESC LIMIT 10

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:635
[0m[33m[0.209ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE user_id = "eabfe9f0-0165-4bed-b403-6ce6b553db34"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:645
[0m[33m[0.342ms] [34;1m[rows:1][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "eabfe9f0-0165-4bed-b403-6ce6b553db34" ORDER BY todos.created_at DESC LIMIT 10

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/ai_service.go:654
[0m[33m[0.120ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "eabfe9f0-0165-4bed-b403-6ce6b553db34" ORDER BY created_at DESC LIMIT 10
--- PASS: TestAIService_GatherUserData (0.01s)
=== RUN   TestAIService_ErrorHandling
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.028ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.090ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.028ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.025ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.076ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
=== RUN   TestAIService_ErrorHandling/server_returns_500_error
=== RUN   TestAIService_ErrorHandling/server_returns_invalid_JSON
=== RUN   TestAIService_ErrorHandling/server_returns_empty_choices
--- PASS: TestAIService_ErrorHandling (0.01s)
    --- PASS: TestAIService_ErrorHandling/server_returns_500_error (0.00s)
    --- PASS: TestAIService_ErrorHandling/server_returns_invalid_JSON (0.01s)
    --- PASS: TestAIService_ErrorHandling/server_returns_empty_choices (0.00s)
=== RUN   TestAIService_ContextTimeout
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.038ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.093ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.023ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.071ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_ContextTimeout (0.10s)
=== RUN   TestAIService_UnsupportedProvider
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.032ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.391ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.058ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.041ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[2.431ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestAIService_UnsupportedProvider (0.01s)
=== RUN   TestConnectionService_DetectConnections
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.056ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.145ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.125ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.311ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.549ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[4.177ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("9e149ad0-ec29-464f-88b5-3798b9d476c0","testuser_5ea8f49f","test_995f74f3@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.838","2025-08-09 09:29:27.838")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.354ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("db999291-2ff8-48d9-8a02-ef02ae918d9d","9e149ad0-ec29-464f-88b5-3798b9d476c0","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.839","2025-08-09 09:29:27.839")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.319ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("9354ee0f-5bcb-4af5-8a10-d691e12bdf9e","9e149ad0-ec29-464f-88b5-3798b9d476c0","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.839","2025-08-09 09:29:27.839")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[1.063ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("96f8989d-aa58-40bd-b83a-3425329bdcec","9e149ad0-ec29-464f-88b5-3798b9d476c0","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.839","2025-08-09 09:29:27.839",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[1.190ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("9c311f8f-491d-4f74-9a0e-2fe44c08a6f3","9e149ad0-ec29-464f-88b5-3798b9d476c0","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.841","2025-08-09 09:29:27.841",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:105
[0m[33m[0.340ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:108
[0m[33m[0.358ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE name = "John Smith" ORDER BY `people`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:111
[0m[33m[0.132ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE title = "Meeting Notes" ORDER BY `notes`.`id` LIMIT 1
=== RUN   TestConnectionService_DetectConnections/detect_person_mention

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.063ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.148ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
    connection_service_test.go:202: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:202
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestConnectionService_DetectConnections/detect_person_mention
=== RUN   TestConnectionService_DetectConnections/detect_note_reference

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.057ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.135ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
    connection_service_test.go:202: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:202
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestConnectionService_DetectConnections/detect_note_reference
=== RUN   TestConnectionService_DetectConnections/detect_multiple_connections

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.054ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.116ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
    connection_service_test.go:202: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:202
        	Error:      	"[]" should have 2 item(s), but has 0
        	Test:       	TestConnectionService_DetectConnections/detect_multiple_connections
=== RUN   TestConnectionService_DetectConnections/no_connections

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.177ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.320ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
--- FAIL: TestConnectionService_DetectConnections (0.02s)
    --- FAIL: TestConnectionService_DetectConnections/detect_person_mention (0.00s)
    --- FAIL: TestConnectionService_DetectConnections/detect_note_reference (0.00s)
    --- FAIL: TestConnectionService_DetectConnections/detect_multiple_connections (0.00s)
    --- PASS: TestConnectionService_DetectConnections/no_connections (0.01s)
=== RUN   TestConnectionService_UpdateConnections
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.124ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.163ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.064ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.055ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.082ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[0.659ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("2386ec34-bdac-4a35-8211-5d8b4458f4fd","testuser_28d95a1c","test_395baadc@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.858","2025-08-09 09:29:27.858")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.234ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("1b19c3f7-91fc-4f9a-ac82-b24b1341d961","2386ec34-bdac-4a35-8211-5d8b4458f4fd","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.858","2025-08-09 09:29:27.858")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.188ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("1298465a-2fea-4062-8fc9-53010e1ceea4","2386ec34-bdac-4a35-8211-5d8b4458f4fd","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.859","2025-08-09 09:29:27.859")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.366ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("5a58c985-c968-422e-8609-54ff4f2280dd","2386ec34-bdac-4a35-8211-5d8b4458f4fd","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.859","2025-08-09 09:29:27.859",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[0.270ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("80420e2e-f1b9-4288-89b1-bd380ad4a873","2386ec34-bdac-4a35-8211-5d8b4458f4fd","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.859","2025-08-09 09:29:27.859",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:223
[0m[33m[0.090ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:226
[0m[33m[0.149ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE name = "John Smith" ORDER BY `people`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:229
[0m[33m[0.109ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE title = "Meeting Notes" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:122
[0m[33m[0.082ms] [34;1m[rows:0][0m DELETE FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND source_id = "5a58c985-c968-422e-8609-54ff4f2280dd" AND source_type = "note"

2025/08/09 14:59:27 [31;1m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:132 [35;1mrecord not found
[0m[33m[0.101ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND source_id = "1b19c3f7-91fc-4f9a-ac82-b24b1341d961" AND target_id = "5a58c985-c968-422e-8609-54ff4f2280dd" AND source_type = "person" AND target_type = "note" ORDER BY `connections`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:148
[0m[33m[0.114ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("5d200148-ffef-4c37-b20b-90eb4c30b334","0d3b5069-f097-4bea-b5e5-aeed867b0210","5a58c985-c968-422e-8609-54ff4f2280dd","note","1b19c3f7-91fc-4f9a-ac82-b24b1341d961","person",1,"2025-08-09 09:29:27.86","2025-08-09 09:29:27.86")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:250
[0m[33m[0.082ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND source_id = "5a58c985-c968-422e-8609-54ff4f2280dd"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:122
[0m[33m[0.062ms] [34;1m[rows:1][0m DELETE FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND source_id = "5a58c985-c968-422e-8609-54ff4f2280dd" AND source_type = "note"

2025/08/09 14:59:27 [31;1m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:132 [35;1mrecord not found
[0m[33m[0.094ms] [34;1m[rows:0][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND source_id = "1b19c3f7-91fc-4f9a-ac82-b24b1341d961" AND target_id = "5a58c985-c968-422e-8609-54ff4f2280dd" AND source_type = "person" AND target_type = "note" ORDER BY `connections`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:148
[0m[33m[0.076ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("af7d708e-dc33-4fe5-a4cd-a4066f6465e1","0d3b5069-f097-4bea-b5e5-aeed867b0210","5a58c985-c968-422e-8609-54ff4f2280dd","note","1b19c3f7-91fc-4f9a-ac82-b24b1341d961","person",1,"2025-08-09 09:29:27.861","2025-08-09 09:29:27.861")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:280
[0m[33m[0.143ms] [34;1m[rows:1][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND source_id = "5a58c985-c968-422e-8609-54ff4f2280dd"
--- PASS: TestConnectionService_UpdateConnections (0.01s)
=== RUN   TestConnectionService_GetGraphData
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.090ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.133ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.039ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.034ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.197ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[2.108ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("1a803120-5ad2-4ea3-ac3a-328dae7a1897","testuser_a139e556","test_2e44241d@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.873","2025-08-09 09:29:27.873")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.765ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("99468a7d-ae4d-4959-9224-b5c4fe745b4f","1a803120-5ad2-4ea3-ac3a-328dae7a1897","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.874","2025-08-09 09:29:27.874")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.434ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("971b389e-fa7f-4f4c-9c33-0b532dcd7734","1a803120-5ad2-4ea3-ac3a-328dae7a1897","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.875","2025-08-09 09:29:27.875")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.479ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("2f101aa1-aa48-4820-ac88-df401a0d2bb5","1a803120-5ad2-4ea3-ac3a-328dae7a1897","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.875","2025-08-09 09:29:27.875",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[0.286ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("1e9ad2a8-5d0c-40bc-b377-c103db3eedaf","1a803120-5ad2-4ea3-ac3a-328dae7a1897","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.876","2025-08-09 09:29:27.876",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:291
[0m[33m[0.098ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:294
[0m[33m[0.187ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE name = "John Smith" ORDER BY `people`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:297
[0m[33m[0.101ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE title = "Meeting Notes" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:308
[0m[33m[0.530ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("b01984e4-d708-4e12-a09f-bb240b86eadf","0d3b5069-f097-4bea-b5e5-aeed867b0210","2f101aa1-aa48-4820-ac88-df401a0d2bb5","note","1b19c3f7-91fc-4f9a-ac82-b24b1341d961","person",1,"2025-08-09 09:29:27.877","2025-08-09 09:29:27.877")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[2.107ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[0.159ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (source_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697" OR target_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.511ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[1.400ms] [34;1m[rows:2][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
    connection_service_test.go:315: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:315
        	Error:      	"1" is not greater than or equal to "2"
        	Test:       	TestConnectionService_GetGraphData
    connection_service_test.go:332: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:332
        	Error:      	Should be true
        	Test:       	TestConnectionService_GetGraphData
        	Messages:   	Test note should be in graph nodes
    connection_service_test.go:333: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:333
        	Error:      	Should be true
        	Test:       	TestConnectionService_GetGraphData
        	Messages:   	Test person should be in graph nodes
--- FAIL: TestConnectionService_GetGraphData (0.02s)
=== RUN   TestConnectionService_SearchGraph
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.048ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.274ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.110ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.065ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.297ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[1.440ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("f06776d3-c546-4369-b9d7-81bcabcac9de","testuser_6336f30c","test_ce6a6c85@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.89","2025-08-09 09:29:27.89")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.420ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("664af73b-5600-4361-9e3f-9faf11916a6d","f06776d3-c546-4369-b9d7-81bcabcac9de","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.891","2025-08-09 09:29:27.891")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.212ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("96ed230b-6c44-44ce-8f82-72bda4e2cc8f","f06776d3-c546-4369-b9d7-81bcabcac9de","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.891","2025-08-09 09:29:27.891")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.397ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("2e781ef1-f19f-419e-a5d3-6a7c80c9f5fb","f06776d3-c546-4369-b9d7-81bcabcac9de","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.891","2025-08-09 09:29:27.891",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[0.268ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("e9088987-33af-4a2b-ae17-668f8bafcc09","f06776d3-c546-4369-b9d7-81bcabcac9de","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.892","2025-08-09 09:29:27.892",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:356
[0m[33m[0.100ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1
=== RUN   TestConnectionService_SearchGraph/search_notes_by_title

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:276
[0m[33m[0.122ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false AND (LOWER(title) LIKE "%meeting%" OR LOWER(CAST(content AS TEXT)) LIKE "%meeting%")
    connection_service_test.go:400: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:400
        	Error:      	"0" is not greater than or equal to "1"
        	Test:       	TestConnectionService_SearchGraph/search_notes_by_title
    connection_service_test.go:410: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:410
        	Error:      	Should be true
        	Test:       	TestConnectionService_SearchGraph/search_notes_by_title
        	Messages:   	Should find node with title: Meeting Notes
=== RUN   TestConnectionService_SearchGraph/search_people_by_name

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:309
[0m[33m[0.082ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (LOWER(name) LIKE "%john%" OR LOWER(company) LIKE "%john%" OR LOWER(title) LIKE "%john%")
    connection_service_test.go:400: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:400
        	Error:      	"0" is not greater than or equal to "1"
        	Test:       	TestConnectionService_SearchGraph/search_people_by_name
    connection_service_test.go:410: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:410
        	Error:      	Should be true
        	Test:       	TestConnectionService_SearchGraph/search_people_by_name
        	Messages:   	Should find node with title: John Smith
=== RUN   TestConnectionService_SearchGraph/search_all_nodes

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:276
[0m[33m[0.091ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false AND (LOWER(title) LIKE "%project%" OR LOWER(CAST(content AS TEXT)) LIKE "%project%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:309
[0m[33m[0.084ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (LOWER(name) LIKE "%project%" OR LOWER(company) LIKE "%project%" OR LOWER(title) LIKE "%project%")
    connection_service_test.go:400: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:400
        	Error:      	"0" is not greater than or equal to "1"
        	Test:       	TestConnectionService_SearchGraph/search_all_nodes
    connection_service_test.go:410: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:410
        	Error:      	Should be true
        	Test:       	TestConnectionService_SearchGraph/search_all_nodes
        	Messages:   	Should find node with title: Project Planning
=== RUN   TestConnectionService_SearchGraph/no_results

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:276
[0m[33m[0.097ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false AND (LOWER(title) LIKE "%nonexistent%" OR LOWER(CAST(content AS TEXT)) LIKE "%nonexistent%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:309
[0m[33m[0.082ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (LOWER(name) LIKE "%nonexistent%" OR LOWER(company) LIKE "%nonexistent%" OR LOWER(title) LIKE "%nonexistent%")
--- FAIL: TestConnectionService_SearchGraph (0.01s)
    --- FAIL: TestConnectionService_SearchGraph/search_notes_by_title (0.00s)
    --- FAIL: TestConnectionService_SearchGraph/search_people_by_name (0.00s)
    --- FAIL: TestConnectionService_SearchGraph/search_all_nodes (0.00s)
    --- PASS: TestConnectionService_SearchGraph/no_results (0.00s)
=== RUN   TestConnectionService_GetNodeConnections
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.026ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.068ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.027ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.062ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[2.366ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[3.091ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("ab3c45f5-759a-456a-990e-5fe3317e17e5","testuser_633fe289","test_f99c65a7@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.899","2025-08-09 09:29:27.899")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[1.690ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("a0e334cd-eed3-40b7-88d5-2d2de750fc8f","ab3c45f5-759a-456a-990e-5fe3317e17e5","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.902","2025-08-09 09:29:27.902")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.951ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("2ceae366-60d7-44db-9119-77509fefcf5d","ab3c45f5-759a-456a-990e-5fe3317e17e5","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.904","2025-08-09 09:29:27.904")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.412ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("538f20c4-9390-4232-b9fa-7eae67969f23","ab3c45f5-759a-456a-990e-5fe3317e17e5","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.905","2025-08-09 09:29:27.905",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[0.282ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("8c1d353a-908e-4ed8-829a-b7e3e6181992","ab3c45f5-759a-456a-990e-5fe3317e17e5","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.905","2025-08-09 09:29:27.905",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:422
[0m[33m[0.104ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:425
[0m[33m[0.167ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE name = "John Smith" ORDER BY `people`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:428
[0m[33m[0.124ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE title = "Meeting Notes" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:447
[0m[33m[0.281ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("22f1e054-1900-40d7-8c34-ba0f8e89b4d7","0d3b5069-f097-4bea-b5e5-aeed867b0210","2e781ef1-f19f-419e-a5d3-6a7c80c9f5fb","note","1b19c3f7-91fc-4f9a-ac82-b24b1341d961","person",1,"2025-08-09 09:29:27.906","2025-08-09 09:29:27.906")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:448
[0m[33m[0.216ms] [34;1m[rows:1][0m INSERT INTO `connections` (`id`,`user_id`,`source_id`,`source_type`,`target_id`,`target_type`,`strength`,`created_at`,`updated_at`) VALUES ("99b42719-ed36-4efd-8d0d-f1015a291e41","0d3b5069-f097-4bea-b5e5-aeed867b0210","1b19c3f7-91fc-4f9a-ac82-b24b1341d961","person","2e781ef1-f19f-419e-a5d3-6a7c80c9f5fb","note",2,"2025-08-09 09:29:27.906","2025-08-09 09:29:27.906")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:336
[0m[33m[0.114ms] [34;1m[rows:2][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (source_id = "2e781ef1-f19f-419e-a5d3-6a7c80c9f5fb" OR target_id = "2e781ef1-f19f-419e-a5d3-6a7c80c9f5fb")
--- PASS: TestConnectionService_GetNodeConnections (0.01s)
=== RUN   TestConnectionService_ExportGraphData
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.031ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.072ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.072ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[0.631ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("1b98eb3d-ba9b-401d-b416-7b85bc142369","testuser_c779aa51","test_eebffe8a@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.909","2025-08-09 09:29:27.909")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.241ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("d1283116-bebf-4f5b-bc6d-1f25a0e1cdaa","1b98eb3d-ba9b-401d-b416-7b85bc142369","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.909","2025-08-09 09:29:27.909")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.216ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("cbaec3a8-97b6-4b4d-8278-774700a3a4ce","1b98eb3d-ba9b-401d-b416-7b85bc142369","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.909","2025-08-09 09:29:27.909")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.373ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("ecc31b05-8e27-45be-9799-48fff4af935c","1b98eb3d-ba9b-401d-b416-7b85bc142369","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.909","2025-08-09 09:29:27.909",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[0.307ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("7275ea6c-2ab7-4d9b-8534-1fb3d7220706","1b98eb3d-ba9b-401d-b416-7b85bc142369","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.91","2025-08-09 09:29:27.91",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:469
[0m[33m[0.095ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1
=== RUN   TestConnectionService_ExportGraphData/export_as_JSON

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[0.140ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[0.081ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (source_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697" OR target_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.056ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[0.111ms] [34;1m[rows:4][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
=== RUN   TestConnectionService_ExportGraphData/export_as_Cypher

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[0.121ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[0.319ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (source_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697" OR target_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.095ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[0.341ms] [34;1m[rows:4][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
=== RUN   TestConnectionService_ExportGraphData/export_as_GEXF

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[2.727ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[1.590ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (source_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697" OR target_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.785ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[0.704ms] [34;1m[rows:4][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
=== RUN   TestConnectionService_ExportGraphData/unsupported_format

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:185
[0m[33m[2.035ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:194
[0m[33m[0.157ms] [34;1m[rows:1][0m SELECT count(*) FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND (source_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697" OR target_id = "451b4dd3-dcc5-4e1e-9ff8-49eff0cd3697")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:215
[0m[33m[0.265ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:238
[0m[33m[0.469ms] [34;1m[rows:4][0m SELECT * FROM `connections` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
--- PASS: TestConnectionService_ExportGraphData (0.02s)
    --- PASS: TestConnectionService_ExportGraphData/export_as_JSON (0.00s)
    --- PASS: TestConnectionService_ExportGraphData/export_as_Cypher (0.00s)
    --- PASS: TestConnectionService_ExportGraphData/export_as_GEXF (0.01s)
    --- PASS: TestConnectionService_ExportGraphData/unsupported_format (0.00s)
=== RUN   TestConnectionService_ExtractTextFromContent
=== RUN   TestConnectionService_ExtractTextFromContent/simple_text_extraction
=== RUN   TestConnectionService_ExtractTextFromContent/nested_content_extraction
=== RUN   TestConnectionService_ExtractTextFromContent/nil_content
=== RUN   TestConnectionService_ExtractTextFromContent/empty_content
--- PASS: TestConnectionService_ExtractTextFromContent (0.00s)
    --- PASS: TestConnectionService_ExtractTextFromContent/simple_text_extraction (0.00s)
    --- PASS: TestConnectionService_ExtractTextFromContent/nested_content_extraction (0.00s)
    --- PASS: TestConnectionService_ExtractTextFromContent/nil_content (0.00s)
    --- PASS: TestConnectionService_ExtractTextFromContent/empty_content (0.00s)
=== RUN   TestConnectionService_DetectPersonMentions
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.087ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.028ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.077ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[0.598ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("13ee608e-ebcb-49b1-9ccb-0eaeb9b92e23","testuser_329d8e0f","test_7b182769@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.926","2025-08-09 09:29:27.926")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.225ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("34326e4f-8a56-4843-8c48-938203bae9dc","13ee608e-ebcb-49b1-9ccb-0eaeb9b92e23","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.927","2025-08-09 09:29:27.927")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.185ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("faa8eb27-5803-4d03-9b8e-74975839e9fa","13ee608e-ebcb-49b1-9ccb-0eaeb9b92e23","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.927","2025-08-09 09:29:27.927")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.346ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("29ba7670-0093-43c0-ae6a-72fb050bb910","13ee608e-ebcb-49b1-9ccb-0eaeb9b92e23","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.927","2025-08-09 09:29:27.927",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[2.602ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("31079b84-bd78-4b26-b480-087583a289d5","13ee608e-ebcb-49b1-9ccb-0eaeb9b92e23","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.927","2025-08-09 09:29:27.927",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:629
[0m[33m[0.181ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1
=== RUN   TestConnectionService_DetectPersonMentions/single_mention

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.106ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
    connection_service_test.go:674: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:674
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestConnectionService_DetectPersonMentions/single_mention
=== RUN   TestConnectionService_DetectPersonMentions/multiple_mentions

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.142ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
    connection_service_test.go:674: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:674
        	Error:      	"[]" should have 2 item(s), but has 0
        	Test:       	TestConnectionService_DetectPersonMentions/multiple_mentions
=== RUN   TestConnectionService_DetectPersonMentions/first_name_only

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.576ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
    connection_service_test.go:674: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:674
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestConnectionService_DetectPersonMentions/first_name_only
=== RUN   TestConnectionService_DetectPersonMentions/no_mentions

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.818ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
=== RUN   TestConnectionService_DetectPersonMentions/invalid_mention

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:399
[0m[33m[0.613ms] [34;1m[rows:0][0m SELECT * FROM `people` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210"
--- FAIL: TestConnectionService_DetectPersonMentions (0.01s)
    --- FAIL: TestConnectionService_DetectPersonMentions/single_mention (0.00s)
    --- FAIL: TestConnectionService_DetectPersonMentions/multiple_mentions (0.00s)
    --- FAIL: TestConnectionService_DetectPersonMentions/first_name_only (0.00s)
    --- PASS: TestConnectionService_DetectPersonMentions/no_mentions (0.00s)
    --- PASS: TestConnectionService_DetectPersonMentions/invalid_mention (0.00s)
=== RUN   TestConnectionService_DetectNoteReferences
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.151ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.337ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.195ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.079ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.160ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:29
[0m[33m[0.945ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("c5a65ed1-5de1-40f4-8b7b-25606717a68c","testuser_5ee9e96d","test_74c0cfde@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.942","2025-08-09 09:29:27.942")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:44
[0m[33m[0.238ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("f79dcb3b-be63-4406-9db0-02667c76b427","c5a65ed1-5de1-40f4-8b7b-25606717a68c","John Smith","john@example.com","","","","","","","2025-08-09 09:29:27.943","2025-08-09 09:29:27.943")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:45
[0m[33m[0.180ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("58eaa1eb-5d35-472c-9b65-469438e37c45","c5a65ed1-5de1-40f4-8b7b-25606717a68c","Sarah Johnson","sarah@example.com","","","","","","","2025-08-09 09:29:27.943","2025-08-09 09:29:27.943")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:88
[0m[33m[0.351ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("5313f94d-50e6-46c5-a5d1-97c2e79b46b3","c5a65ed1-5de1-40f4-8b7b-25606717a68c","Meeting Notes","{\"content\":[{\"content\":[{\"text\":\"Had a great meeting with @John Smith about the project.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.943","2025-08-09 09:29:27.943",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:89
[0m[33m[1.973ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("3367330f-b0be-499a-b09e-7922099e5c56","c5a65ed1-5de1-40f4-8b7b-25606717a68c","Project Planning","{\"content\":[{\"content\":[{\"text\":\"This relates to #Meeting Notes and involves @Sarah Johnson.\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:27.943","2025-08-09 09:29:27.943",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:692
[0m[33m[0.345ms] [34;1m[rows:1][0m SELECT * FROM `users` ORDER BY `users`.`id` LIMIT 1
=== RUN   TestConnectionService_DetectNoteReferences/single_reference

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.222ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
    connection_service_test.go:731: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:731
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestConnectionService_DetectNoteReferences/single_reference
=== RUN   TestConnectionService_DetectNoteReferences/multiple_references

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[1.452ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
    connection_service_test.go:731: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:731
        	Error:      	"[]" should have 2 item(s), but has 0
        	Test:       	TestConnectionService_DetectNoteReferences/multiple_references
=== RUN   TestConnectionService_DetectNoteReferences/partial_match

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[1.570ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
    connection_service_test.go:731: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/connection_service_test.go:731
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestConnectionService_DetectNoteReferences/partial_match
=== RUN   TestConnectionService_DetectNoteReferences/no_references

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.256ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
=== RUN   TestConnectionService_DetectNoteReferences/hashtag_without_match

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/connection_service.go:451
[0m[33m[0.365ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "0d3b5069-f097-4bea-b5e5-aeed867b0210" AND is_archived = false
--- FAIL: TestConnectionService_DetectNoteReferences (0.02s)
    --- FAIL: TestConnectionService_DetectNoteReferences/single_reference (0.00s)
    --- FAIL: TestConnectionService_DetectNoteReferences/multiple_references (0.00s)
    --- FAIL: TestConnectionService_DetectNoteReferences/partial_match (0.00s)
    --- PASS: TestConnectionService_DetectNoteReferences/no_references (0.00s)
    --- PASS: TestConnectionService_DetectNoteReferences/hashtag_without_match (0.00s)
=== RUN   TestSearchService_PerformanceWithLargeDataset
    search_performance_test.go:221: Skipping performance test in short mode
--- SKIP: TestSearchService_PerformanceWithLargeDataset (0.00s)
=== RUN   TestSearchService_QuickSwitcherPerformance
    search_performance_test.go:300: Skipping performance test in short mode
--- SKIP: TestSearchService_QuickSwitcherPerformance (0.00s)
=== RUN   TestSearchService_ConcurrentSearches
    search_performance_test.go:356: Skipping concurrent test in short mode
--- SKIP: TestSearchService_ConcurrentSearches (0.00s)
=== RUN   TestSearchService_MemoryUsage
    search_performance_test.go:397: Skipping memory test in short mode
--- SKIP: TestSearchService_MemoryUsage (0.00s)
=== RUN   TestSearchService_SearchAccuracy
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.161ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.177ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.092ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.047ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.088ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_performance_test.go:49
[0m[33m[0.683ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("4a411abc-b3ef-455e-8595-8ecab6601180","perfuser_4a411abc","perf_4a411abc@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.959","2025-08-09 09:29:27.959")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_performance_test.go:96
[0m[33m[13.894ms] [34;1m[rows:100][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("f13ab484-07b7-4a37-b59f-8c40411473fd","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 0","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 0 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"python\",\"javascript\"}","/",NULL,false,false,true,"2024-10-06 23:59:27.959","2025-07-13 16:59:27.959",1),("44fae4da-e1bd-4b32-8c0d-88db42958f36","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 1","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 1 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"meeting\",\"tutorial\",\"programming\"}","/",NULL,false,false,false,"2025-01-21 21:59:27.959","2025-07-15 14:59:27.959",1),("1e97ad63-02e9-425b-a909-2c4d48a93bee","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 2","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 2 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"api\",\"programming\"}","/",NULL,true,false,false,"2024-09-30 13:59:27.959","2025-07-31 21:59:27.959",1),("7b5389c8-4365-40ff-968f-8d37d6a0f3ce","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 3","{\"content\":\"Research findings on performance optimization and scalability. Note number 3 with additional context and details.\",\"type\":\"doc\"}","Research","{\"project\",\"research\",\"programming\"}","/",NULL,false,false,false,"2024-11-05 13:59:27.959","2025-08-02 17:59:27.959",1),("eb0e61cc-d83f-4f83-85d9-0c8e0096b96e","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 4","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 4 with additional context and details.\",\"type\":\"doc\"}","Research","{\"tutorial\"}","/",NULL,false,true,false,"2024-11-22 03:59:27.959","2025-07-29 01:59:27.959",1),("70bb8b6f-f1ae-419f-ba35-9bd88a9041b8","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 5","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 5 with additional context and details.\",\"type\":\"doc\"}","Research","{\"project\",\"javascript\"}","/",NULL,false,false,false,"2025-07-02 18:59:27.959","2025-08-04 19:59:27.959",1),("a555c245-d33d-49e8-a14a-c5ee00716ba6","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 6","{\"content\":\"System design principles and architectural patterns. Note number 6 with additional context and details.\",\"type\":\"doc\"}","Research","{\"go\",\"go\"}","/",NULL,false,false,false,"2025-06-02 00:59:27.959","2025-07-28 05:59:27.959",1),("bbd50ef4-4d3d-4a05-acfa-220d1d8758ee","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 7","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 7 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"go\",\"programming\",\"go\"}","/",NULL,false,false,true,"2025-06-06 05:59:27.959","2025-08-05 19:59:27.959",1),("bfac05fb-43eb-474b-95f3-b91e0c267265","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 8","{\"content\":\"Step-by-step deployment process and best practices. Note number 8 with additional context and details.\",\"type\":\"doc\"}","Note","{\"go\"}","/",NULL,true,true,false,"2025-05-26 17:59:27.959","2025-08-07 13:59:27.959",1),("2d471481-c067-49dc-ae6d-e0351f05481f","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 9","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 9 with additional context and details.\",\"type\":\"doc\"}","Research","{\"research\",\"tutorial\",\"go\"}","/",NULL,false,false,false,"2025-02-18 05:59:27.959","2025-07-24 04:59:27.959",1),("bcdde4d5-c86b-4b4c-8b61-66a2259bd2e5","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 10","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 10 with additional context and details.\",\"type\":\"doc\"}","Note","{\"api\",\"programming\"}","/",NULL,false,false,false,"2024-12-25 10:59:27.959","2025-07-14 17:59:27.959",1),("d1d9b810-39a9-4449-84e3-efd7365ef636","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 11","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 11 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"research\",\"programming\"}","/",NULL,false,false,false,"2025-06-10 14:59:27.959","2025-07-29 01:59:27.959",1),("4acbb2e7-45a9-441c-8308-d5b5eaf96970","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 12","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 12 with additional context and details.\",\"type\":\"doc\"}","Research","{\"meeting\"}","/",NULL,false,true,false,"2024-09-04 06:59:27.959","2025-07-16 11:59:27.959",1),("86bf15fd-8161-4cdd-a961-b6f12ae69a00","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 13","{\"content\":\"Research findings on performance optimization and scalability. Note number 13 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"api\",\"go\",\"meeting\"}","/",NULL,false,false,false,"2025-04-30 11:59:27.959","2025-08-06 10:59:27.959",1),("27385fbd-d1f9-4ac8-9e7e-3b5ae2d9a577","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 14","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 14 with additional context and details.\",\"type\":\"doc\"}","Note","{\"programming\"}","/",NULL,false,false,false,"2024-10-09 12:59:27.959","2025-08-02 17:59:27.959",1),("f1869fd5-ad99-481b-bc2c-2bea6526410f","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 15","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 15 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"api\",\"python\"}","/",NULL,false,true,true,"2024-10-08 10:59:27.959","2025-08-02 21:59:27.959",1),("977c82b2-bd5b-4f61-abf5-f755e5987615","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 16","{\"content\":\"System design principles and architectural patterns. Note number 16 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\"}","/",NULL,false,false,false,"2024-10-28 10:59:27.959","2025-07-18 03:59:27.959",1),("d1dabfed-8f62-4012-8825-a53038c06806","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 17","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 17 with additional context and details.\",\"type\":\"doc\"}","Project","{\"meeting\"}","/",NULL,false,true,false,"2025-04-25 18:59:27.959","2025-07-23 22:59:27.959",1),("8eedc109-9bd4-47f8-9238-5287cd983017","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 18","{\"content\":\"Step-by-step deployment process and best practices. Note number 18 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"go\",\"research\"}","/",NULL,false,false,false,"2025-07-06 14:59:27.959","2025-07-24 06:59:27.959",1),("99535b7a-c9e2-4b99-92fe-1aa2765bb75d","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 19","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 19 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"javascript\",\"project\",\"project\"}","/",NULL,false,false,false,"2025-02-03 01:59:27.959","2025-07-22 15:59:27.959",1),("fdcf1162-c929-4093-9f85-c39be62d3620","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 20","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 20 with additional context and details.\",\"type\":\"doc\"}","Research","{\"meeting\"}","/",NULL,false,true,false,"2025-07-20 23:59:27.959","2025-08-03 19:59:27.959",1),("5ae27523-80d9-4acd-8d50-738b4a778001","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 21","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 21 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"project\",\"tutorial\",\"go\"}","/",NULL,false,false,false,"2024-11-09 05:59:27.959","2025-07-21 05:59:27.959",1),("af1daaf4-3a72-4b4f-8ef2-71b60c6fa1b8","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 22","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 22 with additional context and details.\",\"type\":\"doc\"}","Note","{\"research\",\"tutorial\"}","/",NULL,false,false,false,"2025-02-14 20:59:27.959","2025-08-01 06:59:27.959",1),("c9c8c2fa-bcef-456e-84b9-dc326b2c021c","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 23","{\"content\":\"Research findings on performance optimization and scalability. Note number 23 with additional context and details.\",\"type\":\"doc\"}","Project","{\"research\"}","/",NULL,false,false,false,"2025-06-16 14:59:27.959","2025-08-03 20:59:27.959",1),("91343ab6-20a1-4cb3-a447-7865868fc6c2","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 24","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 24 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"tutorial\"}","/",NULL,false,false,true,"2025-07-21 02:59:27.959","2025-07-13 15:59:27.959",1),("aeca09b1-93d5-4ecc-8e43-4d0a19800072","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 25","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 25 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"research\",\"research\",\"research\"}","/",NULL,false,false,false,"2024-12-18 23:59:27.959","2025-07-21 08:59:27.959",1),("7558a681-faa1-478f-aaa8-b4d02f6b75d8","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 26","{\"content\":\"System design principles and architectural patterns. Note number 26 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"go\",\"research\",\"programming\"}","/",NULL,false,false,false,"2025-06-17 01:59:27.959","2025-08-06 21:59:27.959",1),("83bc9e17-5550-4e9f-b7af-f6608d518722","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 27","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 27 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"api\",\"documentation\"}","/",NULL,false,false,true,"2025-03-22 18:59:27.959","2025-08-04 20:59:27.959",1),("fef2bdcd-57b6-4123-ab8a-c9d73d7b5f85","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 28","{\"content\":\"Step-by-step deployment process and best practices. Note number 28 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"javascript\",\"go\",\"python\"}","/",NULL,false,true,false,"2024-12-07 19:59:27.959","2025-07-21 22:59:27.959",1),("aefca3df-6ecd-4c04-92df-4c95db27e4ca","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 29","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 29 with additional context and details.\",\"type\":\"doc\"}","Note","{\"project\",\"go\"}","/",NULL,false,false,false,"2025-05-27 21:59:27.959","2025-07-19 13:59:27.959",1),("d003f759-f4de-43e2-bd7e-8c97b37140d7","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 30","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 30 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"research\",\"programming\"}","/",NULL,false,false,false,"2024-12-25 18:59:27.959","2025-07-19 22:59:27.959",1),("c288c18b-bbdb-4836-812c-121c595d3e31","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 31","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 31 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"api\",\"project\",\"tutorial\"}","/",NULL,false,false,false,"2024-09-24 22:59:27.959","2025-07-24 10:59:27.959",1),("138fd3c0-7ec9-4ecd-b161-154f93542152","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 32","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 32 with additional context and details.\",\"type\":\"doc\"}","Project","{\"research\"}","/",NULL,false,false,false,"2024-10-20 04:59:27.959","2025-08-03 12:59:27.959",1),("e2ab2ada-1787-47eb-8850-5215b1e786eb","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 33","{\"content\":\"Research findings on performance optimization and scalability. Note number 33 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\"}","/",NULL,false,false,false,"2025-04-01 22:59:27.959","2025-07-12 05:59:27.959",1),("e86607ed-edb7-44b9-909a-fd4a524d3792","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 34","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 34 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"meeting\"}","/",NULL,false,false,false,"2025-02-11 20:59:27.959","2025-07-27 20:59:27.959",1),("e85da73d-a094-492c-9700-8586fb197433","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 35","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 35 with additional context and details.\",\"type\":\"doc\"}","Note","{\"project\",\"documentation\"}","/",NULL,false,false,false,"2024-09-07 01:59:27.959","2025-07-28 09:59:27.959",1),("e5b729f1-6153-4de5-8349-582e809ee80c","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 36","{\"content\":\"System design principles and architectural patterns. Note number 36 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"meeting\",\"tutorial\",\"research\"}","/",NULL,false,false,false,"2025-03-12 08:59:27.959","2025-07-28 03:59:27.959",1),("fe34ef8b-958e-473b-a0f2-3493e558a496","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 37","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 37 with additional context and details.\",\"type\":\"doc\"}","Research","{\"project\",\"research\",\"api\"}","/",NULL,false,false,false,"2024-11-07 19:59:27.959","2025-08-04 08:59:27.959",1),("a9d4076e-91ec-4410-af13-4b157065adcc","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 38","{\"content\":\"Step-by-step deployment process and best practices. Note number 38 with additional context and details.\",\"type\":\"doc\"}","Project","{\"documentation\",\"project\",\"go\"}","/",NULL,false,true,false,"2025-07-23 23:59:27.959","2025-07-14 00:59:27.959",1),("888ae05f-c99e-44dc-ba30-320984df8a7c","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 39","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 39 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\",\"research\",\"tutorial\"}","/",NULL,false,true,false,"2025-03-21 04:59:27.959","2025-08-04 12:59:27.959",1),("63b761e5-8622-4122-b31f-c61001d9f0ee","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 40","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 40 with additional context and details.\",\"type\":\"doc\"}","Project","{\"documentation\",\"javascript\",\"python\"}","/",NULL,true,false,false,"2025-02-01 03:59:27.959","2025-07-25 19:59:27.959",1),("21182a79-fcd8-464a-9800-1006353c6d68","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 41","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 41 with additional context and details.\",\"type\":\"doc\"}","Project","{\"documentation\"}","/",NULL,false,false,false,"2024-10-20 13:59:27.959","2025-07-22 02:59:27.959",1),("9869ad7b-0baf-4463-a244-572d9a6bad55","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 42","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 42 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"meeting\",\"python\"}","/",NULL,false,false,true,"2025-07-25 05:59:27.959","2025-07-15 21:59:27.959",1),("0eac3a38-2dfb-40ae-a283-f5801fdeb827","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 43","{\"content\":\"Research findings on performance optimization and scalability. Note number 43 with additional context and details.\",\"type\":\"doc\"}","Project","{\"python\"}","/",NULL,false,false,false,"2025-05-13 20:59:27.959","2025-07-14 10:59:27.959",1),("a1c85ec9-2d21-4c49-8f01-53d82f47f554","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 44","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 44 with additional context and details.\",\"type\":\"doc\"}","Research","{\"python\"}","/",NULL,false,false,true,"2025-04-08 07:59:27.959","2025-08-06 07:59:27.959",1),("f640695f-c2ef-4475-a969-fc5eb9bb48d1","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 45","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 45 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"project\"}","/",NULL,false,false,false,"2025-07-05 01:59:27.959","2025-07-29 21:59:27.959",1),("3a1d3391-2726-45bd-b4fd-8c36f99c2223","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 46","{\"content\":\"System design principles and architectural patterns. Note number 46 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"javascript\"}","/",NULL,false,false,false,"2024-11-11 10:59:27.959","2025-08-06 02:59:27.959",1),("a71230d9-98fc-4035-a959-ab056dbad981","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 47","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 47 with additional context and details.\",\"type\":\"doc\"}","Research","{\"tutorial\"}","/",NULL,false,true,true,"2025-07-09 12:59:27.959","2025-07-10 17:59:27.959",1),("cc6a5282-a0e6-4ede-ad90-172d083fa964","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 48","{\"content\":\"Step-by-step deployment process and best practices. Note number 48 with additional context and details.\",\"type\":\"doc\"}","Note","{\"research\"}","/",NULL,false,false,true,"2025-06-19 15:59:27.959","2025-08-01 12:59:27.959",1),("d2c4d151-b452-440e-a60b-b3decd8b5e20","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 49","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 49 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"python\"}","/",NULL,false,false,false,"2025-04-14 23:59:27.959","2025-07-18 00:59:27.959",1),("33390e76-ceac-4a65-9235-041613957a31","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 50","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 50 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"python\",\"go\"}","/",NULL,false,false,false,"2025-03-29 06:59:27.959","2025-08-08 15:59:27.959",1),("9faa1c35-3d7e-4779-8ee3-f51efdaf581d","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 51","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 51 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"documentation\",\"tutorial\",\"documentation\"}","/",NULL,false,false,false,"2025-03-19 04:59:27.959","2025-08-08 03:59:27.959",1),("98b2ab0b-0022-48cb-8bbd-568b18eba243","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 52","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 52 with additional context and details.\",\"type\":\"doc\"}","Research","{\"documentation\",\"documentation\",\"go\"}","/",NULL,false,true,false,"2025-03-13 05:59:27.959","2025-07-20 16:59:27.959",1),("4df3505f-beff-473c-a3dd-4b4e12e56512","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 53","{\"content\":\"Research findings on performance optimization and scalability. Note number 53 with additional context and details.\",\"type\":\"doc\"}","Research","{\"documentation\",\"api\",\"meeting\"}","/",NULL,false,false,false,"2025-02-03 17:59:27.959","2025-07-17 06:59:27.959",1),("d9d6e669-b942-4d2e-90de-e10cd09bf1f1","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 54","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 54 with additional context and details.\",\"type\":\"doc\"}","Research","{\"meeting\",\"project\"}","/",NULL,false,false,false,"2025-06-24 08:59:27.959","2025-07-13 04:59:27.959",1),("8c07bf39-139a-4288-bfd9-88081031737e","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 55","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 55 with additional context and details.\",\"type\":\"doc\"}","Research","{\"documentation\",\"project\"}","/",NULL,false,false,false,"2024-08-27 15:59:27.959","2025-07-22 22:59:27.959",1),("0958cbd8-a477-451e-98c2-1fe5950edb6f","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 56","{\"content\":\"System design principles and architectural patterns. Note number 56 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"javascript\"}","/",NULL,true,false,true,"2025-03-05 18:59:27.959","2025-07-25 15:59:27.959",1),("229a81d4-73a5-43db-b2c1-5517f61994e6","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 57","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 57 with additional context and details.\",\"type\":\"doc\"}","Project","{\"go\",\"project\"}","/",NULL,false,false,true,"2024-08-11 01:59:27.959","2025-07-19 16:59:27.959",1),("97af6e99-8ded-4d63-91bd-470dd8ca5544","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 58","{\"content\":\"Step-by-step deployment process and best practices. Note number 58 with additional context and details.\",\"type\":\"doc\"}","Research","{\"documentation\",\"programming\"}","/",NULL,false,false,false,"2024-09-12 21:59:27.959","2025-07-24 04:59:27.959",1),("42ce60ce-394f-426e-962c-4adecf769789","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 59","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 59 with additional context and details.\",\"type\":\"doc\"}","Note","{\"tutorial\",\"go\",\"javascript\"}","/",NULL,false,false,false,"2024-11-26 19:59:27.959","2025-07-12 04:59:27.959",1),("844cb984-6f87-4440-964e-4b67cf1afb58","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 60","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 60 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"python\"}","/",NULL,false,true,false,"2024-09-10 20:59:27.959","2025-08-09 10:59:27.959",1),("43ea2838-546b-4389-9868-e84b57ce2f51","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 61","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 61 with additional context and details.\",\"type\":\"doc\"}","Research","{\"research\",\"project\"}","/",NULL,false,true,true,"2024-10-24 09:59:27.959","2025-07-21 14:59:27.959",1),("b669de80-951d-4390-b9d1-a813f74b86c2","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 62","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 62 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"python\"}","/",NULL,false,false,false,"2025-05-31 16:59:27.959","2025-07-12 04:59:27.959",1),("6cbeb6eb-a344-4fe0-9f17-44e0c806ad0d","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 63","{\"content\":\"Research findings on performance optimization and scalability. Note number 63 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"research\",\"api\",\"javascript\"}","/",NULL,false,false,false,"2025-01-13 04:59:27.959","2025-08-02 09:59:27.959",1),("6de3590d-215e-4f92-8369-ec0aa94b88e6","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 64","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 64 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"meeting\",\"meeting\",\"project\"}","/",NULL,false,false,false,"2025-06-27 11:59:27.959","2025-07-11 17:59:27.959",1),("3797d906-5c28-46e7-934b-3a0e70c24ca8","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 65","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 65 with additional context and details.\",\"type\":\"doc\"}","Note","{\"research\",\"project\",\"api\"}","/",NULL,false,false,true,"2024-11-29 06:59:27.959","2025-07-28 04:59:27.959",1),("99e7d475-7491-4666-bb2c-6abef93e31b5","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 66","{\"content\":\"System design principles and architectural patterns. Note number 66 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"javascript\",\"documentation\",\"research\"}","/",NULL,false,false,false,"2024-10-05 13:59:27.959","2025-07-15 20:59:27.959",1),("413ade74-3e92-4b90-a169-c38670382682","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 67","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 67 with additional context and details.\",\"type\":\"doc\"}","Project","{\"documentation\",\"tutorial\",\"go\"}","/",NULL,false,false,true,"2025-05-05 00:59:27.959","2025-07-25 13:59:27.959",1),("0226476c-52a7-4312-8a83-da038f3490d2","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 68","{\"content\":\"Step-by-step deployment process and best practices. Note number 68 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"api\"}","/",NULL,false,false,false,"2025-05-15 16:59:27.959","2025-07-29 21:59:27.959",1),("9e7a9073-2fff-4bf7-9fb2-0f6803bb6d84","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 69","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 69 with additional context and details.\",\"type\":\"doc\"}","Project","{\"tutorial\",\"javascript\"}","/",NULL,false,false,false,"2025-06-22 02:59:27.959","2025-07-22 02:59:27.959",1),("bdadfa50-2709-41c6-a5a5-9128aa5e3c12","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 70","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 70 with additional context and details.\",\"type\":\"doc\"}","Project","{\"tutorial\"}","/",NULL,false,false,false,"2024-11-01 00:59:27.959","2025-08-08 14:59:27.959",1),("c8f5317d-b48f-4383-827e-060b74d74468","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 71","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 71 with additional context and details.\",\"type\":\"doc\"}","Note","{\"javascript\",\"documentation\",\"meeting\"}","/",NULL,false,false,false,"2024-10-06 05:59:27.959","2025-07-12 12:59:27.959",1),("9f7e2324-8422-4f79-8ecb-89b69cde7042","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 72","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 72 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"programming\",\"programming\",\"meeting\"}","/",NULL,false,false,false,"2025-02-04 23:59:27.959","2025-07-19 14:59:27.959",1),("1621e484-4b17-4ff8-a883-17882c391154","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 73","{\"content\":\"Research findings on performance optimization and scalability. Note number 73 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\"}","/",NULL,false,false,false,"2025-05-10 08:59:27.959","2025-08-07 06:59:27.959",1),("75e47e29-cb85-4427-90e4-8c533302049e","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 74","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 74 with additional context and details.\",\"type\":\"doc\"}","Project","{\"research\",\"go\"}","/",NULL,false,false,false,"2025-02-24 10:59:27.959","2025-08-04 14:59:27.959",1),("84b584e7-7f0c-4fb3-a9ff-31e199329135","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 75","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 75 with additional context and details.\",\"type\":\"doc\"}","Project","{\"meeting\",\"meeting\"}","/",NULL,false,false,false,"2024-11-19 11:59:27.959","2025-08-04 07:59:27.959",1),("e5c8f543-07e2-47ee-b6da-f40318c7d58f","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 76","{\"content\":\"System design principles and architectural patterns. Note number 76 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"go\"}","/",NULL,false,false,false,"2025-04-18 10:59:27.959","2025-07-31 11:59:27.959",1),("3d0e6b6b-99da-4544-ac8a-882d40da9e27","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 77","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 77 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"documentation\",\"javascript\",\"programming\"}","/",NULL,false,false,false,"2025-04-17 18:59:27.959","2025-07-18 19:59:27.959",1),("b7487ae9-d87a-4d50-a6f9-b5236cecadc7","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 78","{\"content\":\"Step-by-step deployment process and best practices. Note number 78 with additional context and details.\",\"type\":\"doc\"}","Note","{\"project\",\"programming\",\"go\"}","/",NULL,false,false,false,"2024-12-19 01:59:27.959","2025-07-21 07:59:27.959",1),("7ea20343-30fd-4371-8c3f-ea70444adfd7","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 79","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 79 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"api\",\"tutorial\",\"programming\"}","/",NULL,false,false,false,"2025-04-14 20:59:27.959","2025-07-23 17:59:27.959",1),("42684bef-2707-4c3e-b551-2d6de4770e84","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 80","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 80 with additional context and details.\",\"type\":\"doc\"}","Project","{\"go\",\"javascript\"}","/",NULL,true,false,true,"2024-11-23 02:59:27.959","2025-07-29 12:59:27.959",1),("2380beda-135c-407d-9432-82df997cc719","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 81","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 81 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\",\"go\"}","/",NULL,false,false,false,"2025-07-24 18:59:27.959","2025-07-28 19:59:27.959",1),("fd780b2a-b337-4905-a521-a933e3b406a9","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 82","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 82 with additional context and details.\",\"type\":\"doc\"}","Research","{\"tutorial\",\"meeting\"}","/",NULL,false,false,true,"2025-05-14 05:59:27.959","2025-07-23 10:59:27.959",1),("b7e1fb75-5bb4-4c77-acc1-69842469a8f9","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 83","{\"content\":\"Research findings on performance optimization and scalability. Note number 83 with additional context and details.\",\"type\":\"doc\"}","Research","{\"project\"}","/",NULL,false,false,true,"2025-03-30 06:59:27.959","2025-07-30 00:59:27.959",1),("b7013a98-b582-4fe4-885c-44a0574f31be","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 84","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 84 with additional context and details.\",\"type\":\"doc\"}","Note","{\"tutorial\",\"documentation\",\"tutorial\"}","/",NULL,false,false,false,"2025-03-11 14:59:27.959","2025-07-29 23:59:27.959",1),("a556e55e-e3ef-4874-bbce-81eb209d2748","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 85","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 85 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"javascript\",\"meeting\",\"python\"}","/",NULL,false,true,false,"2024-08-17 03:59:27.959","2025-07-26 06:59:27.959",1),("42e932dc-05bc-45ae-b0c6-e03e0f0f4ac9","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 86","{\"content\":\"System design principles and architectural patterns. Note number 86 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\",\"go\"}","/",NULL,false,false,false,"2025-03-01 00:59:27.959","2025-07-16 16:59:27.959",1),("3dcb0e95-71a9-4c30-aac2-86a57411cb61","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 87","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 87 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"go\",\"documentation\",\"project\"}","/",NULL,false,false,false,"2025-04-11 18:59:27.959","2025-07-31 03:59:27.959",1),("c80b8ef9-f3b3-4dee-b8f7-1359caead12f","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 88","{\"content\":\"Step-by-step deployment process and best practices. Note number 88 with additional context and details.\",\"type\":\"doc\"}","Project","{\"python\",\"programming\"}","/",NULL,false,false,false,"2025-03-11 00:59:27.959","2025-07-14 23:59:27.959",1),("9b89f094-88eb-4399-87bf-4d788bad57e6","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 89","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 89 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"project\"}","/",NULL,false,false,true,"2025-04-27 08:59:27.959","2025-08-02 16:59:27.959",1),("ecafe806-e362-4b93-97e9-289cfac0cb87","4a411abc-b3ef-455e-8595-8ecab6601180","Go Programming Tutorial 90","{\"content\":\"This is a comprehensive guide about software development practices and methodologies. Note number 90 with additional context and details.\",\"type\":\"doc\"}","Project","{\"research\"}","/",NULL,false,false,true,"2025-08-02 12:59:27.959","2025-07-14 11:59:27.959",1),("ccbd182c-02b3-4394-8ce2-845a5ed732b4","4a411abc-b3ef-455e-8595-8ecab6601180","JavaScript Best Practices 91","{\"content\":\"Modern development requires understanding of various tools and frameworks. Note number 91 with additional context and details.\",\"type\":\"doc\"}","Note","{\"python\"}","/",NULL,false,false,false,"2025-06-13 22:59:27.959","2025-07-11 16:59:27.959",1),("fd1f540f-1725-4a40-a136-d443b85783cf","4a411abc-b3ef-455e-8595-8ecab6601180","Meeting Notes - Project Alpha 92","{\"content\":\"Discussion about project timeline, requirements, and deliverables. Note number 92 with additional context and details.\",\"type\":\"doc\"}","Note","{\"javascript\"}","/",NULL,false,false,false,"2025-02-21 01:59:27.959","2025-08-05 19:59:27.959",1),("c5eeab16-5a2a-4140-a3a2-506c966d6476","4a411abc-b3ef-455e-8595-8ecab6601180","Research on Database Performance 93","{\"content\":\"Research findings on performance optimization and scalability. Note number 93 with additional context and details.\",\"type\":\"doc\"}","Meeting","{\"tutorial\"}","/",NULL,false,false,true,"2025-04-06 14:59:27.959","2025-07-15 10:59:27.959",1),("3aba6a5d-f12d-4d13-b542-6f1b975f15ac","4a411abc-b3ef-455e-8595-8ecab6601180","API Documentation 94","{\"content\":\"Detailed documentation of API endpoints and usage examples. Note number 94 with additional context and details.\",\"type\":\"doc\"}","Note","{\"research\"}","/",NULL,false,false,true,"2025-01-14 14:59:27.959","2025-07-31 17:59:27.959",1),("442bd3bb-90eb-4562-b18b-1fa2b2f9b3e1","4a411abc-b3ef-455e-8595-8ecab6601180","Code Review Guidelines 95","{\"content\":\"Guidelines for conducting effective code reviews and maintaining quality. Note number 95 with additional context and details.\",\"type\":\"doc\"}","Project","{\"python\"}","/",NULL,false,false,false,"2025-06-24 05:59:27.959","2025-07-30 19:59:27.959",1),("88008265-2062-4c80-8ab8-eca57ce3cbc2","4a411abc-b3ef-455e-8595-8ecab6601180","System Architecture Design 96","{\"content\":\"System design principles and architectural patterns. Note number 96 with additional context and details.\",\"type\":\"doc\"}","Tutorial","{\"documentation\",\"documentation\"}","/",NULL,false,false,false,"2024-12-30 08:59:27.959","2025-07-27 07:59:27.959",1),("9be0e654-f6db-420a-aac8-ef9f5616876e","4a411abc-b3ef-455e-8595-8ecab6601180","Testing Strategies 97","{\"content\":\"Testing approaches including unit, integration, and end-to-end testing. Note number 97 with additional context and details.\",\"type\":\"doc\"}","Research","{\"tutorial\",\"tutorial\",\"research\"}","/",NULL,false,false,false,"2024-12-29 20:59:27.959","2025-07-31 19:59:27.959",1),("33c80938-ac19-4bad-b428-63f64a582a9e","4a411abc-b3ef-455e-8595-8ecab6601180","Deployment Process 98","{\"content\":\"Step-by-step deployment process and best practices. Note number 98 with additional context and details.\",\"type\":\"doc\"}","Project","{\"documentation\",\"python\",\"python\"}","/",NULL,false,false,true,"2025-02-03 02:59:27.959","2025-08-02 00:59:27.959",1),("94c43c0a-a676-44bb-bd3d-fd90885d4f9c","4a411abc-b3ef-455e-8595-8ecab6601180","Performance Optimization 99","{\"content\":\"Performance tuning techniques and monitoring strategies. Note number 99 with additional context and details.\",\"type\":\"doc\"}","Note","{\"documentation\",\"go\"}","/",NULL,false,false,false,"2024-09-26 10:59:27.959","2025-08-05 04:59:27.959",1)
=== RUN   TestSearchService_SearchAccuracy/common_term_search

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.297ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "4a411abc-b3ef-455e-8595-8ecab6601180" AND is_archived = false AND (LOWER(title) LIKE "%programming%" OR LOWER(CAST(content AS TEXT)) LIKE "%programming%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.558ms] [34;1m[rows:8][0m SELECT * FROM `notes` WHERE user_id = "4a411abc-b3ef-455e-8595-8ecab6601180" AND is_archived = false AND (LOWER(title) LIKE "%programming%" OR LOWER(CAST(content AS TEXT)) LIKE "%programming%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 50
=== RUN   TestSearchService_SearchAccuracy/specific_term_search

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.239ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "4a411abc-b3ef-455e-8595-8ecab6601180" AND is_archived = false AND (LOWER(title) LIKE "%tutorial%" OR LOWER(CAST(content AS TEXT)) LIKE "%tutorial%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.440ms] [34;1m[rows:8][0m SELECT * FROM `notes` WHERE user_id = "4a411abc-b3ef-455e-8595-8ecab6601180" AND is_archived = false AND (LOWER(title) LIKE "%tutorial%" OR LOWER(CAST(content AS TEXT)) LIKE "%tutorial%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 50
=== RUN   TestSearchService_SearchAccuracy/rare_term_search

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.221ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "4a411abc-b3ef-455e-8595-8ecab6601180" AND is_archived = false AND (LOWER(title) LIKE "%nonexistent%" OR LOWER(CAST(content AS TEXT)) LIKE "%nonexistent%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.282ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE user_id = "4a411abc-b3ef-455e-8595-8ecab6601180" AND is_archived = false AND (LOWER(title) LIKE "%nonexistent%" OR LOWER(CAST(content AS TEXT)) LIKE "%nonexistent%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 50
--- PASS: TestSearchService_SearchAccuracy (0.02s)
    --- PASS: TestSearchService_SearchAccuracy/common_term_search (0.00s)
    --- PASS: TestSearchService_SearchAccuracy/specific_term_search (0.00s)
    --- PASS: TestSearchService_SearchAccuracy/rare_term_search (0.00s)
=== RUN   TestSearchService_FullTextSearch
Successfully connected to sqlite database

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.052ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.100ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.227ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.037ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.173ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:30
[0m[33m[3.563ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("50da0942-c9c2-40e5-96b1-08826e16d55b","testuser_50da0942","test_50da0942@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:27.983","2025-08-09 09:29:27.983")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[2.506ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("d6427df9-ae40-468b-ba90-581f4770a2c2","50da0942-c9c2-40e5-96b1-08826e16d55b","Go Programming Tutorial","{\"content\":[{\"content\":[{\"text\":\"This is a comprehensive guide to Go programming language\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"go\",\"programming\",\"tutorial\"}","/",NULL,false,true,false,"2025-08-09 09:29:27.985","2025-08-09 09:29:27.985",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.811ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("c991929e-8094-4936-aa9f-e3ceb26577e3","50da0942-c9c2-40e5-96b1-08826e16d55b","JavaScript Best Practices","{\"content\":[{\"content\":[{\"text\":\"Modern JavaScript development practices and patterns\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"javascript\",\"best-practices\"}","/",NULL,false,false,true,"2025-08-09 09:29:27.987","2025-08-09 09:29:27.987",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.421ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("51c8edc7-c201-42db-b7a0-15684eb5c84d","50da0942-c9c2-40e5-96b1-08826e16d55b","Meeting Notes - Project Alpha","{\"content\":[{\"content\":[{\"text\":\"Discussion about project alpha timeline and requirements\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting","{\"meeting\",\"project-alpha\"}","/",NULL,false,false,false,"2025-08-09 09:29:27.988","2025-08-09 09:29:27.988",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.856ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("88ba7200-83d0-45be-8b04-027bb6380f6f","50da0942-c9c2-40e5-96b1-08826e16d55b","Archived Note","{\"content\":[{\"content\":[{\"text\":\"This note is archived\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"archived\"}","/",NULL,true,false,false,"2025-08-09 09:29:27.989","2025-08-09 09:29:27.989",1)

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.874ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("4ea99da5-a598-4242-a9fe-103d3999d628","50da0942-c9c2-40e5-96b1-08826e16d55b","Python Data Science","{\"content\":[{\"content\":[{\"text\":\"Data science with Python pandas and numpy\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"python\",\"data-science\",\"pandas\"}","/",NULL,false,false,false,"2025-08-09 09:29:27.99","2025-08-09 09:29:27.99",1)
=== RUN   TestSearchService_FullTextSearch/search_by_title

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.437ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND (LOWER(title) LIKE "%go programming%" OR LOWER(CAST(content AS TEXT)) LIKE "%go programming%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.538ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND (LOWER(title) LIKE "%go programming%" OR LOWER(CAST(content AS TEXT)) LIKE "%go programming%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_by_content

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.143ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND (LOWER(title) LIKE "%javascript%" OR LOWER(CAST(content AS TEXT)) LIKE "%javascript%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.217ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND (LOWER(title) LIKE "%javascript%" OR LOWER(CAST(content AS TEXT)) LIKE "%javascript%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_by_category

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.068ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND category IN ("Tutorial")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.158ms] [34;1m[rows:2][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND category IN ("Tutorial") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_by_tag

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.082ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND (tags LIKE "%\"programming\"%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.162ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND (tags LIKE "%\"programming\"%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_with_multiple_filters

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.099ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND category IN ("Tutorial") AND (LOWER(title) LIKE "%tutorial%" OR LOWER(CAST(content AS TEXT)) LIKE "%tutorial%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.184ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND category IN ("Tutorial") AND (LOWER(title) LIKE "%tutorial%" OR LOWER(CAST(content AS TEXT)) LIKE "%tutorial%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_archived_notes

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.087ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = true AND (LOWER(title) LIKE "%archived%" OR LOWER(CAST(content AS TEXT)) LIKE "%archived%")

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.169ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = true AND (LOWER(title) LIKE "%archived%" OR LOWER(CAST(content AS TEXT)) LIKE "%archived%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_pinned_notes

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.064ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND is_pinned = true

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.109ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND is_pinned = true ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/search_favorite_notes

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.057ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND is_favorite = true

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.118ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false AND is_favorite = true ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearch/empty_search_returns_all_non-archived

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.388ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false

2025/08/09 14:59:27 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[1.147ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "50da0942-c9c2-40e5-96b1-08826e16d55b" AND is_archived = false ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
--- PASS: TestSearchService_FullTextSearch (0.02s)
    --- PASS: TestSearchService_FullTextSearch/search_by_title (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_by_content (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_by_category (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_by_tag (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_with_multiple_filters (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_archived_notes (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_pinned_notes (0.00s)
    --- PASS: TestSearchService_FullTextSearch/search_favorite_notes (0.00s)
    --- PASS: TestSearchService_FullTextSearch/empty_search_returns_all_non-archived (0.00s)
=== RUN   TestSearchService_FullTextSearchWithSnippets
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.086ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.596ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.196ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.165ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.418ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:30
[0m[33m[6.122ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("917c11e4-0088-4137-b2f6-096eefc082e1","testuser_917c11e4","test_917c11e4@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.009","2025-08-09 09:29:28.009")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.848ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("cf7997f7-2dda-4342-8481-12ac440d2a4c","917c11e4-0088-4137-b2f6-096eefc082e1","Go Programming Tutorial","{\"content\":[{\"content\":[{\"text\":\"This is a comprehensive guide to Go programming language\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"go\",\"programming\",\"tutorial\"}","/",NULL,false,true,false,"2025-08-09 09:29:28.01","2025-08-09 09:29:28.01",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.681ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("2d9181fc-f814-4fda-a927-0b65daa40ab8","917c11e4-0088-4137-b2f6-096eefc082e1","JavaScript Best Practices","{\"content\":[{\"content\":[{\"text\":\"Modern JavaScript development practices and patterns\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"javascript\",\"best-practices\"}","/",NULL,false,false,true,"2025-08-09 09:29:28.011","2025-08-09 09:29:28.011",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[2.924ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("0a63f409-a2de-47dc-b714-42b3887a1183","917c11e4-0088-4137-b2f6-096eefc082e1","Meeting Notes - Project Alpha","{\"content\":[{\"content\":[{\"text\":\"Discussion about project alpha timeline and requirements\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting","{\"meeting\",\"project-alpha\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.012","2025-08-09 09:29:28.012",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[3.344ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("b4fc0781-8c35-4857-a859-a52d301ebf82","917c11e4-0088-4137-b2f6-096eefc082e1","Archived Note","{\"content\":[{\"content\":[{\"text\":\"This note is archived\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"archived\"}","/",NULL,true,false,false,"2025-08-09 09:29:28.016","2025-08-09 09:29:28.016",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[2.198ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("85c9c547-b324-424d-bf15-0d8343b7e97c","917c11e4-0088-4137-b2f6-096eefc082e1","Python Data Science","{\"content\":[{\"content\":[{\"text\":\"Data science with Python pandas and numpy\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"python\",\"data-science\",\"pandas\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.019","2025-08-09 09:29:28.019",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.238ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "917c11e4-0088-4137-b2f6-096eefc082e1" AND is_archived = false AND (LOWER(title) LIKE "%go programming%" OR LOWER(CAST(content AS TEXT)) LIKE "%go programming%")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.516ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE user_id = "917c11e4-0088-4137-b2f6-096eefc082e1" AND is_archived = false AND (LOWER(title) LIKE "%go programming%" OR LOWER(CAST(content AS TEXT)) LIKE "%go programming%") ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
--- PASS: TestSearchService_FullTextSearchWithSnippets (0.03s)
=== RUN   TestSearchService_FullTextSearchSorting
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.036ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.073ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.022ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.025ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.105ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:30
[0m[33m[0.582ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("ef72e67c-431e-481c-9728-c9b7a6f0df24","testuser_ef72e67c","test_ef72e67c@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.026","2025-08-09 09:29:28.026")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[5.449ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("74f66d43-ac06-4ca6-b3bf-8469af6bd711","ef72e67c-431e-481c-9728-c9b7a6f0df24","Go Programming Tutorial","{\"content\":[{\"content\":[{\"text\":\"This is a comprehensive guide to Go programming language\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"go\",\"programming\",\"tutorial\"}","/",NULL,false,true,false,"2025-08-09 09:29:28.027","2025-08-09 09:29:28.027",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[1.099ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("3dabee14-4c06-404f-bba2-7181251d7b38","ef72e67c-431e-481c-9728-c9b7a6f0df24","JavaScript Best Practices","{\"content\":[{\"content\":[{\"text\":\"Modern JavaScript development practices and patterns\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"javascript\",\"best-practices\"}","/",NULL,false,false,true,"2025-08-09 09:29:28.032","2025-08-09 09:29:28.032",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[5.773ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("86dad5f3-c61b-486a-a431-baa82c5f2552","ef72e67c-431e-481c-9728-c9b7a6f0df24","Meeting Notes - Project Alpha","{\"content\":[{\"content\":[{\"text\":\"Discussion about project alpha timeline and requirements\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting","{\"meeting\",\"project-alpha\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.034","2025-08-09 09:29:28.034",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[1.534ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("4b174431-f0f1-4a4d-9066-eedcfedd3495","ef72e67c-431e-481c-9728-c9b7a6f0df24","Archived Note","{\"content\":[{\"content\":[{\"text\":\"This note is archived\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"archived\"}","/",NULL,true,false,false,"2025-08-09 09:29:28.04","2025-08-09 09:29:28.04",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.730ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("bb3b9560-3a4b-4063-ac8a-d11608ea2409","ef72e67c-431e-481c-9728-c9b7a6f0df24","Python Data Science","{\"content\":[{\"content\":[{\"text\":\"Data science with Python pandas and numpy\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"python\",\"data-science\",\"pandas\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.041","2025-08-09 09:29:28.041",1)
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_title_asc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.302ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.374ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, title ASC LIMIT 10
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_title_desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.099ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.258ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, title DESC LIMIT 10
    search_service_test.go:266: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:266
        	Error:      	"Go Programming Tutorial" is not greater than or equal to "Python Data Science"
        	Test:       	TestSearchService_FullTextSearchSorting/sort_by_title_desc
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_date_asc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.068ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.179ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, created_at ASC LIMIT 10
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_date_desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.066ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.181ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, created_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_updated_asc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.061ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[1.087ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, updated_at ASC LIMIT 10
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_updated_desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[2.125ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[2.129ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_FullTextSearchSorting/sort_by_relevance

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:112
[0m[33m[0.985ms] [34;1m[rows:1][0m SELECT count(*) FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:120
[0m[33m[0.349ms] [34;1m[rows:4][0m SELECT * FROM `notes` WHERE user_id = "ef72e67c-431e-481c-9728-c9b7a6f0df24" AND is_archived = false ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
--- FAIL: TestSearchService_FullTextSearchSorting (0.03s)
    --- PASS: TestSearchService_FullTextSearchSorting/sort_by_title_asc (0.00s)
    --- FAIL: TestSearchService_FullTextSearchSorting/sort_by_title_desc (0.00s)
    --- PASS: TestSearchService_FullTextSearchSorting/sort_by_date_asc (0.00s)
    --- PASS: TestSearchService_FullTextSearchSorting/sort_by_date_desc (0.00s)
    --- PASS: TestSearchService_FullTextSearchSorting/sort_by_updated_asc (0.00s)
    --- PASS: TestSearchService_FullTextSearchSorting/sort_by_updated_desc (0.00s)
    --- PASS: TestSearchService_FullTextSearchSorting/sort_by_relevance (0.00s)
=== RUN   TestSearchService_QuickSwitcher
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.150ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.117ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.064ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.051ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.142ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:30
[0m[33m[0.647ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0","testuser_dacd37ad","test_dacd37ad@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.059","2025-08-09 09:29:28.059")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.372ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("79eeab29-e5fe-468a-906e-f3071339f7df","dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0","Go Programming Tutorial","{\"content\":[{\"content\":[{\"text\":\"This is a comprehensive guide to Go programming language\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"go\",\"programming\",\"tutorial\"}","/",NULL,false,true,false,"2025-08-09 09:29:28.059","2025-08-09 09:29:28.059",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.276ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("3e50e566-9428-4db3-a10a-cf802d130ec7","dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0","JavaScript Best Practices","{\"content\":[{\"content\":[{\"text\":\"Modern JavaScript development practices and patterns\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"javascript\",\"best-practices\"}","/",NULL,false,false,true,"2025-08-09 09:29:28.059","2025-08-09 09:29:28.059",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.288ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("5520165b-096a-4f71-938d-eb2d9a1656b5","dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0","Meeting Notes - Project Alpha","{\"content\":[{\"content\":[{\"text\":\"Discussion about project alpha timeline and requirements\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting","{\"meeting\",\"project-alpha\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.06","2025-08-09 09:29:28.06",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.412ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("9b523ccf-918c-45a7-8811-9e870cd95b6a","dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0","Archived Note","{\"content\":[{\"content\":[{\"text\":\"This note is archived\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"archived\"}","/",NULL,true,false,false,"2025-08-09 09:29:28.06","2025-08-09 09:29:28.06",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.278ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("80bdf03d-37f1-4751-8f5b-19ab07fac25b","dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0","Python Data Science","{\"content\":[{\"content\":[{\"text\":\"Data science with Python pandas and numpy\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"python\",\"data-science\",\"pandas\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.06","2025-08-09 09:29:28.06",1)
=== RUN   TestSearchService_QuickSwitcher/exact_title_match

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:181
[0m[33m[0.169ms] [34;1m[rows:1][0m SELECT id, title, category, folder_path, updated_at FROM `notes` WHERE (user_id = "dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0" AND is_archived = false) AND LOWER(title) LIKE "%go programming tutorial%" ORDER BY is_pinned DESC, updated_at DESC LIMIT 20
=== RUN   TestSearchService_QuickSwitcher/partial_title_match

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:181
[0m[33m[0.134ms] [34;1m[rows:1][0m SELECT id, title, category, folder_path, updated_at FROM `notes` WHERE (user_id = "dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0" AND is_archived = false) AND LOWER(title) LIKE "%go%" ORDER BY is_pinned DESC, updated_at DESC LIMIT 20
=== RUN   TestSearchService_QuickSwitcher/fuzzy_match

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:181
[0m[33m[0.240ms] [34;1m[rows:1][0m SELECT id, title, category, folder_path, updated_at FROM `notes` WHERE (user_id = "dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0" AND is_archived = false) AND LOWER(title) LIKE "%prog%" ORDER BY is_pinned DESC, updated_at DESC LIMIT 20
=== RUN   TestSearchService_QuickSwitcher/empty_query_returns_recent

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:181
[0m[33m[0.323ms] [34;1m[rows:4][0m SELECT id, title, category, folder_path, updated_at FROM `notes` WHERE user_id = "dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0" AND is_archived = false ORDER BY is_pinned DESC, updated_at DESC LIMIT 10
=== RUN   TestSearchService_QuickSwitcher/no_matches

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:181
[0m[33m[0.875ms] [34;1m[rows:0][0m SELECT id, title, category, folder_path, updated_at FROM `notes` WHERE (user_id = "dacd37ad-1d6a-4759-9d8a-1ff6ecf707e0" AND is_archived = false) AND LOWER(title) LIKE "%nonexistent%" ORDER BY is_pinned DESC, updated_at DESC LIMIT 20
--- PASS: TestSearchService_QuickSwitcher (0.01s)
    --- PASS: TestSearchService_QuickSwitcher/exact_title_match (0.00s)
    --- PASS: TestSearchService_QuickSwitcher/partial_title_match (0.00s)
    --- PASS: TestSearchService_QuickSwitcher/fuzzy_match (0.00s)
    --- PASS: TestSearchService_QuickSwitcher/empty_query_returns_recent (0.00s)
    --- PASS: TestSearchService_QuickSwitcher/no_matches (0.00s)
=== RUN   TestSearchService_GetRecentNotes
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.069ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.185ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.032ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.151ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.362ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:30
[0m[33m[3.244ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("9990a817-f5ba-4361-b76e-2de671eb1040","testuser_9990a817","test_9990a817@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.071","2025-08-09 09:29:28.071")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[2.769ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("b40d45f6-170d-4508-9cd4-98e205e30086","9990a817-f5ba-4361-b76e-2de671eb1040","Go Programming Tutorial","{\"content\":[{\"content\":[{\"text\":\"This is a comprehensive guide to Go programming language\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"go\",\"programming\",\"tutorial\"}","/",NULL,false,true,false,"2025-08-09 09:29:28.073","2025-08-09 09:29:28.073",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[1.885ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("fb9298ec-d161-4c73-8a08-1784d4fa19fc","9990a817-f5ba-4361-b76e-2de671eb1040","JavaScript Best Practices","{\"content\":[{\"content\":[{\"text\":\"Modern JavaScript development practices and patterns\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"javascript\",\"best-practices\"}","/",NULL,false,false,true,"2025-08-09 09:29:28.076","2025-08-09 09:29:28.076",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.614ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("73d0070a-217f-4cdb-ab03-a6fec65ab77b","9990a817-f5ba-4361-b76e-2de671eb1040","Meeting Notes - Project Alpha","{\"content\":[{\"content\":[{\"text\":\"Discussion about project alpha timeline and requirements\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Meeting","{\"meeting\",\"project-alpha\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.08","2025-08-09 09:29:28.08",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[0.491ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("434d5ba8-39ed-4a7a-a24d-6a2dd99fbde9","9990a817-f5ba-4361-b76e-2de671eb1040","Archived Note","{\"content\":[{\"content\":[{\"text\":\"This note is archived\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note","{\"archived\"}","/",NULL,true,false,false,"2025-08-09 09:29:28.08","2025-08-09 09:29:28.08",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:80
[0m[33m[2.780ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("3a93fce3-4814-4ea6-8fc6-2492a8716425","9990a817-f5ba-4361-b76e-2de671eb1040","Python Data Science","{\"content\":[{\"content\":[{\"text\":\"Data science with Python pandas and numpy\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Tutorial","{\"python\",\"data-science\",\"pandas\"}","/",NULL,false,false,false,"2025-08-09 09:29:28.082","2025-08-09 09:29:28.082",1)
=== RUN   TestSearchService_GetRecentNotes/get_recent_notes_with_limit

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:228
[0m[33m[0.538ms] [34;1m[rows:3][0m SELECT id, title, category, updated_at FROM `notes` WHERE user_id = "9990a817-f5ba-4361-b76e-2de671eb1040" AND is_archived = false ORDER BY updated_at DESC LIMIT 3
=== RUN   TestSearchService_GetRecentNotes/get_all_recent_notes

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:228
[0m[33m[0.721ms] [34;1m[rows:4][0m SELECT id, title, category, updated_at FROM `notes` WHERE user_id = "9990a817-f5ba-4361-b76e-2de671eb1040" AND is_archived = false ORDER BY updated_at DESC LIMIT 10
=== RUN   TestSearchService_GetRecentNotes/limit_too_high

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/search_service.go:228
[0m[33m[0.367ms] [34;1m[rows:4][0m SELECT id, title, category, updated_at FROM `notes` WHERE user_id = "9990a817-f5ba-4361-b76e-2de671eb1040" AND is_archived = false ORDER BY updated_at DESC LIMIT 10
--- PASS: TestSearchService_GetRecentNotes (0.02s)
    --- PASS: TestSearchService_GetRecentNotes/get_recent_notes_with_limit (0.00s)
    --- PASS: TestSearchService_GetRecentNotes/get_all_recent_notes (0.00s)
    --- PASS: TestSearchService_GetRecentNotes/limit_too_high (0.00s)
=== RUN   TestSearchService_CalculateRelevanceScore
=== RUN   TestSearchService_CalculateRelevanceScore/exact_title_match
=== RUN   TestSearchService_CalculateRelevanceScore/partial_title_match
=== RUN   TestSearchService_CalculateRelevanceScore/tag_match
=== RUN   TestSearchService_CalculateRelevanceScore/no_match
    search_service_test.go:438: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:438
        	Error:      	Not equal: 
        	            	expected: 0
        	            	actual  : 1.5
        	Test:       	TestSearchService_CalculateRelevanceScore/no_match
=== RUN   TestSearchService_CalculateRelevanceScore/empty_query
--- FAIL: TestSearchService_CalculateRelevanceScore (0.00s)
    --- PASS: TestSearchService_CalculateRelevanceScore/exact_title_match (0.00s)
    --- PASS: TestSearchService_CalculateRelevanceScore/partial_title_match (0.00s)
    --- PASS: TestSearchService_CalculateRelevanceScore/tag_match (0.00s)
    --- FAIL: TestSearchService_CalculateRelevanceScore/no_match (0.00s)
    --- PASS: TestSearchService_CalculateRelevanceScore/empty_query (0.00s)
=== RUN   TestSearchService_CalculateFuzzyScore
=== RUN   TestSearchService_CalculateFuzzyScore/exact_match
=== RUN   TestSearchService_CalculateFuzzyScore/starts_with
=== RUN   TestSearchService_CalculateFuzzyScore/contains
    search_service_test.go:501: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:501
        	Error:      	Not equal: 
        	            	expected: 4
        	            	actual  : 6
        	Test:       	TestSearchService_CalculateFuzzyScore/contains
=== RUN   TestSearchService_CalculateFuzzyScore/fuzzy_match
=== RUN   TestSearchService_CalculateFuzzyScore/no_match
--- FAIL: TestSearchService_CalculateFuzzyScore (0.00s)
    --- PASS: TestSearchService_CalculateFuzzyScore/exact_match (0.00s)
    --- PASS: TestSearchService_CalculateFuzzyScore/starts_with (0.00s)
    --- FAIL: TestSearchService_CalculateFuzzyScore/contains (0.00s)
    --- PASS: TestSearchService_CalculateFuzzyScore/fuzzy_match (0.00s)
    --- PASS: TestSearchService_CalculateFuzzyScore/no_match (0.00s)
=== RUN   TestSearchService_DetermineMatchType
=== RUN   TestSearchService_DetermineMatchType/title_match
=== RUN   TestSearchService_DetermineMatchType/category_match
=== RUN   TestSearchService_DetermineMatchType/tag_match_only
=== RUN   TestSearchService_DetermineMatchType/no_match_defaults_to_content
=== RUN   TestSearchService_DetermineMatchType/empty_query
--- PASS: TestSearchService_DetermineMatchType (0.00s)
    --- PASS: TestSearchService_DetermineMatchType/title_match (0.00s)
    --- PASS: TestSearchService_DetermineMatchType/category_match (0.00s)
    --- PASS: TestSearchService_DetermineMatchType/tag_match_only (0.00s)
    --- PASS: TestSearchService_DetermineMatchType/no_match_defaults_to_content (0.00s)
    --- PASS: TestSearchService_DetermineMatchType/empty_query (0.00s)
=== RUN   TestSearchService_GenerateSnippets
    search_service_test.go:569: 
        	Error Trace:	/Users/nikhil/code/NoteSage/server/internal/services/search_service_test.go:569
        	Error:      	"Go **Programming** Tutorial" does not contain "**programming**"
        	Test:       	TestSearchService_GenerateSnippets
--- FAIL: TestSearchService_GenerateSnippets (0.00s)
=== RUN   TestTodoService_ParseTodoLine
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.116ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.151ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.031ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.026ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.097ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:19
[0m[33m[0.205ms] [34;1m[rows:16][0m DELETE FROM todos

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:20
[0m[33m[0.185ms] [34;1m[rows:21][0m DELETE FROM people

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:21
[0m[33m[1.625ms] [34;1m[rows:153][0m DELETE FROM notes

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:22
[0m[33m[1.538ms] [34;1m[rows:29][0m DELETE FROM users

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:32
[0m[33m[1.159ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("2175489e-28b6-4eff-b78d-efdce1d46261","testuser_parse","test_parse@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.097","2025-08-09 09:29:28.097")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:39
[0m[33m[0.427ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("5b352b69-7c21-44a1-b0ef-f834541a2c32","2175489e-28b6-4eff-b78d-efdce1d46261","John Doe","john@example.com","","","","","","","2025-08-09 09:29:28.098","2025-08-09 09:29:28.098")
=== RUN   TestTodoService_ParseTodoLine/Simple_incomplete_todo
=== RUN   TestTodoService_ParseTodoLine/Simple_completed_todo
=== RUN   TestTodoService_ParseTodoLine/Todo_with_person_assignment

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:274
[0m[33m[0.219ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE LOWER(name) = LOWER("john") OR LOWER(name) LIKE LOWER("%john%") OR LOWER(email) = LOWER("john") ORDER BY `people`.`id` LIMIT 1
=== RUN   TestTodoService_ParseTodoLine/Todo_with_due_date
=== RUN   TestTodoService_ParseTodoLine/Todo_with_person_and_due_date

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:274
[0m[33m[0.159ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE LOWER(name) = LOWER("john") OR LOWER(name) LIKE LOWER("%john%") OR LOWER(email) = LOWER("john") ORDER BY `people`.`id` LIMIT 1
=== RUN   TestTodoService_ParseTodoLine/Invalid_format_-_no_todo_ID
=== RUN   TestTodoService_ParseTodoLine/Invalid_format_-_wrong_checkbox_format
=== RUN   TestTodoService_ParseTodoLine/Not_a_todo_line
--- PASS: TestTodoService_ParseTodoLine (0.01s)
    --- PASS: TestTodoService_ParseTodoLine/Simple_incomplete_todo (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Simple_completed_todo (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Todo_with_person_assignment (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Todo_with_due_date (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Todo_with_person_and_due_date (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Invalid_format_-_no_todo_ID (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Invalid_format_-_wrong_checkbox_format (0.00s)
    --- PASS: TestTodoService_ParseTodoLine/Not_a_todo_line (0.00s)
=== RUN   TestTodoService_ScanNoteForTodos
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.488ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.399ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.201ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.199ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.132ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestTodoService_ScanNoteForTodos (0.01s)
=== RUN   TestTodoService_SyncNoteTodos
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.039ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.081ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.027ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.035ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.086ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:228
[0m[33m[0.724ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("f0d55a16-f21a-4bee-b158-c2c339977625","testuser_sync","test_sync@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.108","2025-08-09 09:29:28.108")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:258
[0m[33m[0.418ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("ea1ac96b-ae87-4299-9a0a-bfb0f0234434","f0d55a16-f21a-4bee-b158-c2c339977625","Test Note","{\"content\":[{\"content\":[{\"text\":\"- [ ][t1] New todo item\",\"type\":\"text\"}],\"type\":\"paragraph\"},{\"content\":[{\"text\":\"- [x][t2] Completed todo\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.109","2025-08-09 09:29:28.109",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:267
[0m[33m[0.296ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("57bcd936-351a-4425-a34d-dc7d2cf43ff6","ea1ac96b-ae87-4299-9a0a-bfb0f0234434","t1","Old text",true,NULL,NULL,"2025-08-09 09:29:28.109","2025-08-09 09:29:28.109")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:276
[0m[33m[0.266ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("a3dc34bf-5bd0-486d-9fd8-4f54decb6714","ea1ac96b-ae87-4299-9a0a-bfb0f0234434","t3","This should be deleted",false,NULL,NULL,"2025-08-09 09:29:28.109","2025-08-09 09:29:28.109")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:103
[0m[33m[0.140ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "ea1ac96b-ae87-4299-9a0a-bfb0f0234434" AND user_id = "f0d55a16-f21a-4bee-b158-c2c339977625" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:112
[0m[33m[0.089ms] [34;1m[rows:2][0m SELECT * FROM `todos` WHERE note_id = "ea1ac96b-ae87-4299-9a0a-bfb0f0234434"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:136
[0m[33m[0.269ms] [34;1m[rows:1][0m UPDATE `todos` SET `note_id`="ea1ac96b-ae87-4299-9a0a-bfb0f0234434",`todo_id`="t1",`text`="New todo item",`is_completed`=false,`assigned_person_id`=NULL,`due_date`=NULL,`created_at`="2025-08-09 09:29:28.109",`updated_at`="2025-08-09 09:29:28.11" WHERE `id` = "57bcd936-351a-4425-a34d-dc7d2cf43ff6"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:150
[0m[33m[0.602ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("62c8e984-4050-4be8-8343-a58aa064ef85","ea1ac96b-ae87-4299-9a0a-bfb0f0234434","t2","Completed todo",true,NULL,NULL,"2025-08-09 09:29:28.11","2025-08-09 09:29:28.11")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:159
[0m[33m[1.244ms] [34;1m[rows:1][0m DELETE FROM `todos` WHERE `todos`.`id` = "a3dc34bf-5bd0-486d-9fd8-4f54decb6714"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:284
[0m[33m[0.221ms] [34;1m[rows:2][0m SELECT * FROM `todos` WHERE note_id = "ea1ac96b-ae87-4299-9a0a-bfb0f0234434"

2025/08/09 14:59:28 [31;1m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:310 [35;1mrecord not found
[0m[33m[0.156ms] [34;1m[rows:0][0m SELECT * FROM `todos` WHERE note_id = "ea1ac96b-ae87-4299-9a0a-bfb0f0234434" AND todo_id = "t3" ORDER BY `todos`.`id` LIMIT 1
--- PASS: TestTodoService_SyncNoteTodos (0.01s)
=== RUN   TestTodoService_GenerateNextTodoID
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.262ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.688ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.058ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.095ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:326
[0m[33m[0.753ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("a1fd2fde-2d1a-4117-99e6-9e5130cc9f84","testuser_generate","test_generate@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.122","2025-08-09 09:29:28.122")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:332
[0m[33m[1.562ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("0cb11a35-6274-4450-87e0-d7ce159b161c","a1fd2fde-2d1a-4117-99e6-9e5130cc9f84","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.123","2025-08-09 09:29:28.123",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:171
[0m[33m[0.655ms] [34;1m[rows:0][0m SELECT * FROM `todos` WHERE note_id = "0cb11a35-6274-4450-87e0-d7ce159b161c"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:347
[0m[33m[0.874ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("4e861a2e-250d-4dc2-89be-9e81c1405141","0cb11a35-6274-4450-87e0-d7ce159b161c","t1","First",false,NULL,NULL,"2025-08-09 09:29:28.125","2025-08-09 09:29:28.125")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:347
[0m[33m[0.268ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("310b53e0-91a1-4bdb-8f0c-6eea50a4c516","0cb11a35-6274-4450-87e0-d7ce159b161c","t3","Third",false,NULL,NULL,"2025-08-09 09:29:28.126","2025-08-09 09:29:28.126")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:347
[0m[33m[0.213ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("1d5471ef-9d0f-4487-bf45-f8d3a9388e57","0cb11a35-6274-4450-87e0-d7ce159b161c","t2","Second",false,NULL,NULL,"2025-08-09 09:29:28.126","2025-08-09 09:29:28.126")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:171
[0m[33m[0.120ms] [34;1m[rows:3][0m SELECT * FROM `todos` WHERE note_id = "0cb11a35-6274-4450-87e0-d7ce159b161c"
--- PASS: TestTodoService_GenerateNextTodoID (0.01s)
=== RUN   TestTodoService_GetTodosWithFilters
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.071ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.179ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.047ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.169ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.534ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:368
[0m[33m[5.782ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("b89e69b5-ab27-4b50-a26a-96199d7a0a3d","testuser_filters","test_filters@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.14","2025-08-09 09:29:28.14")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:376
[0m[33m[0.320ms] [34;1m[rows:1][0m INSERT INTO `people` (`id`,`user_id`,`name`,`email`,`phone`,`company`,`title`,`linkedin_url`,`avatar_url`,`notes`,`created_at`,`updated_at`) VALUES ("4fb84971-01a4-4bc9-bede-82f0e4fa84c7","b89e69b5-ab27-4b50-a26a-96199d7a0a3d","John Doe","john@example.com","","","","","","","2025-08-09 09:29:28.14","2025-08-09 09:29:28.14")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:381
[0m[33m[0.389ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("e184c1f9-ad2a-4a9e-ba32-205c158fa646","b89e69b5-ab27-4b50-a26a-96199d7a0a3d","Note 1","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.141","2025-08-09 09:29:28.141",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:382
[0m[33m[0.313ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("99bc8c4e-74d4-407a-b670-e0cf80d24621","b89e69b5-ab27-4b50-a26a-96199d7a0a3d","Note 2","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.141","2025-08-09 09:29:28.141",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:395
[0m[33m[0.246ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("b2d904a6-2428-449c-97ae-05535c7e3f9b","e184c1f9-ad2a-4a9e-ba32-205c158fa646","t1","Incomplete todo",false,NULL,NULL,"2025-08-09 09:29:28.141","2025-08-09 09:29:28.141")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:395
[0m[33m[0.264ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("5e743029-ad50-4cc7-9f0d-f0e267c0a791","e184c1f9-ad2a-4a9e-ba32-205c158fa646","t2","Complete todo",true,NULL,NULL,"2025-08-09 09:29:28.142","2025-08-09 09:29:28.142")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:395
[0m[33m[0.309ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("2e727c9d-51fc-4119-b7ff-716d15162485","99bc8c4e-74d4-407a-b670-e0cf80d24621","t1","Assigned todo",false,"4fb84971-01a4-4bc9-bede-82f0e4fa84c7",NULL,"2025-08-09 09:29:28.142","2025-08-09 09:29:28.142")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:395
[0m[33m[0.242ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("de0c1811-c34d-4221-8103-b25c39009c32","99bc8c4e-74d4-407a-b670-e0cf80d24621","t2","Todo with due date",false,NULL,"2024-01-15 00:00:00","2025-08-09 09:29:28.142","2025-08-09 09:29:28.142")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:395
[0m[33m[0.274ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("66cd92f7-8ece-4270-8ab4-4ef97215b0ab","99bc8c4e-74d4-407a-b670-e0cf80d24621","t3","Search this text",false,NULL,NULL,"2025-08-09 09:29:28.143","2025-08-09 09:29:28.143")
=== RUN   TestTodoService_GetTodosWithFilters/No_filters

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.086ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE `people`.`id` = "4fb84971-01a4-4bc9-bede-82f0e4fa84c7"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.153ms] [34;1m[rows:2][0m SELECT * FROM `notes` WHERE `notes`.`id` IN ("99bc8c4e-74d4-407a-b670-e0cf80d24621","e184c1f9-ad2a-4a9e-ba32-205c158fa646")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.577ms] [34;1m[rows:5][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Filter_by_note_ID

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.247ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "e184c1f9-ad2a-4a9e-ba32-205c158fa646"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[2.129ms] [34;1m[rows:2][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.note_id = "e184c1f9-ad2a-4a9e-ba32-205c158fa646" ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Filter_by_completed_status

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.110ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "e184c1f9-ad2a-4a9e-ba32-205c158fa646"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.367ms] [34;1m[rows:1][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.is_completed = true ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Filter_by_incomplete_status

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[1.047ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE `people`.`id` = "4fb84971-01a4-4bc9-bede-82f0e4fa84c7"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[1.246ms] [34;1m[rows:2][0m SELECT * FROM `notes` WHERE `notes`.`id` IN ("99bc8c4e-74d4-407a-b670-e0cf80d24621","e184c1f9-ad2a-4a9e-ba32-205c158fa646")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[4.930ms] [34;1m[rows:4][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.is_completed = false ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Filter_by_assigned_person

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.160ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE `people`.`id` = "4fb84971-01a4-4bc9-bede-82f0e4fa84c7"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.124ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "99bc8c4e-74d4-407a-b670-e0cf80d24621"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[1.528ms] [34;1m[rows:1][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.assigned_person_id = "4fb84971-01a4-4bc9-bede-82f0e4fa84c7" ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Filter_by_has_due_date

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.163ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "99bc8c4e-74d4-407a-b670-e0cf80d24621"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.490ms] [34;1m[rows:1][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.due_date IS NOT NULL ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Filter_by_no_due_date

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.329ms] [34;1m[rows:1][0m SELECT * FROM `people` WHERE `people`.`id` = "4fb84971-01a4-4bc9-bede-82f0e4fa84c7"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.735ms] [34;1m[rows:2][0m SELECT * FROM `notes` WHERE `notes`.`id` IN ("99bc8c4e-74d4-407a-b670-e0cf80d24621","e184c1f9-ad2a-4a9e-ba32-205c158fa646")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[1.931ms] [34;1m[rows:4][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.due_date IS NULL ORDER BY todos.created_at DESC
=== RUN   TestTodoService_GetTodosWithFilters/Search_filter

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[0.503ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "99bc8c4e-74d4-407a-b670-e0cf80d24621"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:233
[0m[33m[1.598ms] [34;1m[rows:1][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "b89e69b5-ab27-4b50-a26a-96199d7a0a3d" AND todos.text LIKE "%Search%" ORDER BY todos.created_at DESC
--- PASS: TestTodoService_GetTodosWithFilters (0.03s)
    --- PASS: TestTodoService_GetTodosWithFilters/No_filters (0.00s)
    --- PASS: TestTodoService_GetTodosWithFilters/Filter_by_note_ID (0.00s)
    --- PASS: TestTodoService_GetTodosWithFilters/Filter_by_completed_status (0.00s)
    --- PASS: TestTodoService_GetTodosWithFilters/Filter_by_incomplete_status (0.01s)
    --- PASS: TestTodoService_GetTodosWithFilters/Filter_by_assigned_person (0.00s)
    --- PASS: TestTodoService_GetTodosWithFilters/Filter_by_has_due_date (0.00s)
    --- PASS: TestTodoService_GetTodosWithFilters/Filter_by_no_due_date (0.00s)
    --- PASS: TestTodoService_GetTodosWithFilters/Search_filter (0.00s)
=== RUN   TestTodoService_GetCalendarTodos
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.032ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.074ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.023ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.024ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.095ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:467
[0m[33m[3.445ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("f167ff48-0cf1-4928-ad71-453ab7cf9ff7","testuser_calendar","test_calendar@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.162","2025-08-09 09:29:28.162")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:471
[0m[33m[0.650ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("02498047-ce38-4af6-9eb4-cf934c1e27d2","f167ff48-0cf1-4928-ad71-453ab7cf9ff7","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.164","2025-08-09 09:29:28.164",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:488
[0m[33m[0.593ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("82c20657-fe91-4663-abf5-8acf022846bb","02498047-ce38-4af6-9eb4-cf934c1e27d2","t1","Before range",false,NULL,"2024-01-10 00:00:00","2025-08-09 09:29:28.165","2025-08-09 09:29:28.165")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:488
[0m[33m[0.421ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("ccdbd36b-00bd-4666-b3f3-a4623a2603f4","02498047-ce38-4af6-9eb4-cf934c1e27d2","t2","In range 1",false,NULL,"2024-01-15 00:00:00","2025-08-09 09:29:28.166","2025-08-09 09:29:28.166")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:488
[0m[33m[1.604ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("42f1dd91-5eb2-47b2-9789-f22140a54eb7","02498047-ce38-4af6-9eb4-cf934c1e27d2","t3","In range 2",false,NULL,"2024-01-20 00:00:00","2025-08-09 09:29:28.166","2025-08-09 09:29:28.166")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:488
[0m[33m[1.737ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("cdeebc8f-54a1-4a5e-8fce-8f701d0bff24","02498047-ce38-4af6-9eb4-cf934c1e27d2","t4","After range",false,NULL,"2024-01-25 00:00:00","2025-08-09 09:29:28.168","2025-08-09 09:29:28.168")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service_test.go:488
[0m[33m[3.876ms] [34;1m[rows:1][0m INSERT INTO `todos` (`id`,`note_id`,`todo_id`,`text`,`is_completed`,`assigned_person_id`,`due_date`,`created_at`,`updated_at`) VALUES ("e7531f89-285b-4dce-94eb-cf0af52a28dc","02498047-ce38-4af6-9eb4-cf934c1e27d2","t5","No due date",false,NULL,NULL,"2025-08-09 09:29:28.17","2025-08-09 09:29:28.17")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:249
[0m[33m[0.245ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "02498047-ce38-4af6-9eb4-cf934c1e27d2"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/todo_service.go:249
[0m[33m[1.031ms] [34;1m[rows:2][0m SELECT `todos`.`id`,`todos`.`note_id`,`todos`.`todo_id`,`todos`.`text`,`todos`.`is_completed`,`todos`.`assigned_person_id`,`todos`.`due_date`,`todos`.`created_at`,`todos`.`updated_at` FROM `todos` JOIN notes ON todos.note_id = notes.id WHERE notes.user_id = "f167ff48-0cf1-4928-ad71-453ab7cf9ff7" AND todos.due_date BETWEEN "2024-01-12 00:00:00" AND "2024-01-22 00:00:00" ORDER BY todos.due_date ASC
--- PASS: TestTodoService_GetCalendarTodos (0.02s)
=== RUN   TestWebSocketService_NewWebSocketService
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.037ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[9.426ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.060ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.045ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.418ms] [34;1m[rows:4][0m SELECT * FROM `migrations`
--- PASS: TestWebSocketService_NewWebSocketService (0.01s)
=== RUN   TestWebSocketService_HandleWebSocket
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.038ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.109ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.029ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.030ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.077ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:37
[0m[33m[0.598ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("6eb57647-b9bd-4d0a-b17f-04ce7876e7ba","testuser_6eb57647","test_6eb57647@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.193","2025-08-09 09:29:28.193")
2025/08/09 14:59:28 Client registered: testuser_6eb57647 (1b842420-a50e-479c-bd8f-2316d8610c31)
2025/08/09 14:59:28 Client unregistered: testuser_6eb57647 (1b842420-a50e-479c-bd8f-2316d8610c31)
--- PASS: TestWebSocketService_HandleWebSocket (0.11s)
=== RUN   TestWebSocketService_JoinRoom
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.116ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.440ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.036ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.033ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.083ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:37
[0m[33m[0.687ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("5b4ce9b4-cf50-43ae-a103-189029f3a7ef","testuser_5b4ce9b4","test_5b4ce9b4@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.305","2025-08-09 09:29:28.305")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:50
[0m[33m[0.423ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("96fcc13a-6a00-4e28-b977-d358f41c3e9c","5b4ce9b4-cf50-43ae-a103-189029f3a7ef","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.306","2025-08-09 09:29:28.306",1)
2025/08/09 14:59:28 Client registered: testuser_5b4ce9b4 (11678178-a9c3-441d-93a0-83dff1977890)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:197
[0m[33m[0.165ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "96fcc13a-6a00-4e28-b977-d358f41c3e9c" AND user_id = "5b4ce9b4-cf50-43ae-a103-189029f3a7ef" ORDER BY `notes`.`id` LIMIT 1
2025/08/09 14:59:28 Client unregistered: testuser_5b4ce9b4 (11678178-a9c3-441d-93a0-83dff1977890)
--- PASS: TestWebSocketService_JoinRoom (0.01s)
=== RUN   TestWebSocketService_JoinRoom_UnauthorizedNote
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.031ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.070ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.023ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.023ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.066ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:37
[0m[33m[0.574ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("7b45f44a-8bb5-4a09-b551-d5d827f526e1","testuser_7b45f44a","test_7b45f44a@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.309","2025-08-09 09:29:28.309")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:182
[0m[33m[0.173ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("c88426ff-c264-4ab3-913c-216d7a1d436d","otheruser_c88426ff","other_c88426ff@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.309","2025-08-09 09:29:28.309")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:50
[0m[33m[0.306ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("9072cd21-312e-4d0d-9a65-c6997a887571","c88426ff-c264-4ab3-913c-216d7a1d436d","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.31","2025-08-09 09:29:28.31",1)
2025/08/09 14:59:28 Client registered: testuser_7b45f44a (bad803f3-e70f-4091-810e-38239a5361cd)

2025/08/09 14:59:28 [31;1m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:197 [35;1mrecord not found
[0m[33m[0.164ms] [34;1m[rows:0][0m SELECT * FROM `notes` WHERE id = "9072cd21-312e-4d0d-9a65-c6997a887571" AND user_id = "7b45f44a-8bb5-4a09-b551-d5d827f526e1" ORDER BY `notes`.`id` LIMIT 1
2025/08/09 14:59:28 Client unregistered: testuser_7b45f44a (bad803f3-e70f-4091-810e-38239a5361cd)
--- PASS: TestWebSocketService_JoinRoom_UnauthorizedNote (0.01s)
=== RUN   TestWebSocketService_NoteUpdate
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.243ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.551ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.252ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.218ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.179ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:37
[0m[33m[3.997ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("f4fb6a69-b104-450d-8047-bb2707362f8e","testuser_f4fb6a69","test_f4fb6a69@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.325","2025-08-09 09:29:28.325")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:50
[0m[33m[0.362ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("9b9bb116-19ea-43f2-bc63-9b473dcdb3a9","f4fb6a69-b104-450d-8047-bb2707362f8e","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.326","2025-08-09 09:29:28.326",1)
2025/08/09 14:59:28 Client registered: testuser_f4fb6a69 (3fa09d98-e598-4377-a024-e27e56553abd)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:197
[0m[33m[0.143ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "9b9bb116-19ea-43f2-bc63-9b473dcdb3a9" AND user_id = "f4fb6a69-b104-450d-8047-bb2707362f8e" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:297
[0m[33m[1.869ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "9b9bb116-19ea-43f2-bc63-9b473dcdb3a9" AND user_id = "f4fb6a69-b104-450d-8047-bb2707362f8e" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:313
[0m[33m[0.546ms] [34;1m[rows:1][0m UPDATE `notes` SET `user_id`="f4fb6a69-b104-450d-8047-bb2707362f8e",`title`="Test Note",`content`="{\"content\":[{\"content\":[{\"text\":\"Updated content\",\"type\":\"text\"}],\"type\":\"paragraph\"}],\"type\":\"doc\"}",`category`="Note",`tags`=NULL,`folder_path`="/",`scheduled_date`=NULL,`is_archived`=false,`is_pinned`=false,`is_favorite`=false,`created_at`="2025-08-09 09:29:28.326",`updated_at`="2025-08-09 09:29:28.33",`version`=2 WHERE `id` = "9b9bb116-19ea-43f2-bc63-9b473dcdb3a9"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:278
[0m[33m[0.192ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE `notes`.`id` = "9b9bb116-19ea-43f2-bc63-9b473dcdb3a9" ORDER BY `notes`.`id` LIMIT 1
2025/08/09 14:59:28 Client unregistered: testuser_f4fb6a69 (3fa09d98-e598-4377-a024-e27e56553abd)
--- PASS: TestWebSocketService_NoteUpdate (0.02s)
=== RUN   TestWebSocketService_NoteUpdate_VersionConflict
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.078ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.964ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[1.391ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.258ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.249ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:37
[0m[33m[2.250ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("91a9dd91-c1e6-4e9e-80ce-8888b27e359c","testuser_91a9dd91","test_91a9dd91@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.342","2025-08-09 09:29:28.342")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:50
[0m[33m[0.870ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("44fe873f-404a-4f9b-b86c-f81719e86ce4","91a9dd91-c1e6-4e9e-80ce-8888b27e359c","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.343","2025-08-09 09:29:28.343",1)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:293
[0m[33m[0.252ms] [34;1m[rows:1][0m UPDATE `notes` SET `version`=2,`updated_at`="2025-08-09 09:29:28.343" WHERE `id` = "44fe873f-404a-4f9b-b86c-f81719e86ce4"
2025/08/09 14:59:28 Client registered: testuser_91a9dd91 (bdb9d86e-2276-413d-86e1-3680cb8d9c4f)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:197
[0m[33m[0.270ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "44fe873f-404a-4f9b-b86c-f81719e86ce4" AND user_id = "91a9dd91-c1e6-4e9e-80ce-8888b27e359c" ORDER BY `notes`.`id` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:297
[0m[33m[0.156ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "44fe873f-404a-4f9b-b86c-f81719e86ce4" AND user_id = "91a9dd91-c1e6-4e9e-80ce-8888b27e359c" ORDER BY `notes`.`id` LIMIT 1
2025/08/09 14:59:28 Client unregistered: testuser_91a9dd91 (bdb9d86e-2276-413d-86e1-3680cb8d9c4f)
--- PASS: TestWebSocketService_NoteUpdate_VersionConflict (0.02s)
=== RUN   TestWebSocketService_GetRoomStats
Successfully connected to sqlite database

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.170ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type='table' AND name="migrations"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.258ms] [34;1m[rows:2][0m SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "migrations" AND sql IS NOT NULL order by type = "table" desc

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.085ms] [34;1m[rows:-][0m SELECT * FROM `migrations` LIMIT 1

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:74
[0m[33m[0.049ms] [34;1m[rows:-][0m SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "migrations" AND name = "idx_migrations_version"

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/migrations/migrations.go:80
[0m[33m[0.120ms] [34;1m[rows:4][0m SELECT * FROM `migrations`

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:37
[0m[33m[0.714ms] [34;1m[rows:1][0m INSERT INTO `users` (`id`,`username`,`email`,`password`,`role`,`is_active`,`last_login`,`created_at`,`updated_at`) VALUES ("fc210de4-1dbb-40ba-9dfe-6a6943fb5f46","testuser_fc210de4","test_fc210de4@example.com","hashedpassword","user",true,NULL,"2025-08-09 09:29:28.359","2025-08-09 09:29:28.359")

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service_test.go:50
[0m[33m[0.342ms] [34;1m[rows:1][0m INSERT INTO `notes` (`id`,`user_id`,`title`,`content`,`category`,`tags`,`folder_path`,`scheduled_date`,`is_archived`,`is_pinned`,`is_favorite`,`created_at`,`updated_at`,`version`) VALUES ("5aebe349-a648-4844-a1fd-940b1ada6025","fc210de4-1dbb-40ba-9dfe-6a6943fb5f46","Test Note","{\"content\":[],\"type\":\"doc\"}","Note",NULL,"/",NULL,false,false,false,"2025-08-09 09:29:28.359","2025-08-09 09:29:28.359",1)
2025/08/09 14:59:28 Client registered: testuser_fc210de4 (e0ae5919-a889-4b8c-a57d-d7f20717668d)

2025/08/09 14:59:28 [32m/Users/nikhil/code/NoteSage/server/internal/services/websocket_service.go:197
[0m[33m[0.151ms] [34;1m[rows:1][0m SELECT * FROM `notes` WHERE id = "5aebe349-a648-4844-a1fd-940b1ada6025" AND user_id = "fc210de4-1dbb-40ba-9dfe-6a6943fb5f46" ORDER BY `notes`.`id` LIMIT 1
2025/08/09 14:59:28 Client unregistered: testuser_fc210de4 (e0ae5919-a889-4b8c-a57d-d7f20717668d)
--- PASS: TestWebSocketService_GetRoomStats (0.01s)
FAIL
FAIL	notesage-server/internal/services	2.458s
FAIL
