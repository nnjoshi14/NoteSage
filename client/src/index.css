@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: hsl(0, 0%, 98%);
  --foreground: hsl(222, 84%, 4.9%);
  --muted: hsl(210, 40%, 95%);
  --muted-foreground: hsl(215, 16%, 47%);
  --popover: hsl(0, 0%, 100%);
  --popover-foreground: hsl(222, 84%, 4.9%);
  --card: hsl(0, 0%, 100%);
  --card-foreground: hsl(222, 84%, 4.9%);
  --border: hsl(214, 32%, 91%);
  --input: hsl(214, 32%, 91%);
  --primary: hsl(221, 83%, 53%);
  --primary-foreground: hsl(210, 40%, 98%);
  --secondary: hsl(210, 40%, 96%);
  --secondary-foreground: hsl(222, 47%, 11%);
  --accent: hsl(142, 76%, 36%);
  --accent-foreground: hsl(210, 40%, 98%);
  --destructive: hsl(0, 84%, 60%);
  --destructive-foreground: hsl(210, 40%, 98%);
  --ring: hsl(221, 83%, 53%);
  --radius: 0.5rem;
}

.dark {
  --background: hsl(222, 84%, 4.9%);
  --foreground: hsl(210, 40%, 98%);
  --muted: hsl(217, 32%, 17%);
  --muted-foreground: hsl(215, 20%, 65%);
  --popover: hsl(222, 84%, 4.9%);
  --popover-foreground: hsl(210, 40%, 98%);
  --card: hsl(222, 84%, 4.9%);
  --card-foreground: hsl(210, 40%, 98%);
  --border: hsl(217, 32%, 17%);
  --input: hsl(217, 32%, 17%);
  --primary: hsl(217, 91%, 60%);
  --primary-foreground: hsl(222, 47%, 11%);
  --secondary: hsl(217, 32%, 17%);
  --secondary-foreground: hsl(210, 40%, 98%);
  --accent: hsl(142, 76%, 36%);
  --accent-foreground: hsl(210, 40%, 98%);
  --destructive: hsl(0, 63%, 31%);
  --destructive-foreground: hsl(210, 40%, 98%);
  --ring: hsl(217, 91%, 60%);
  --radius: 0.5rem;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }

  /* Touch-friendly scrollbars for iPad */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-muted;
  }

  ::-webkit-scrollbar-thumb {
    background-color: hsl(var(--muted-foreground) / 0.3);
    @apply rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--muted-foreground) / 0.5);
  }
}

/* Custom styles for rich text editor */
.ProseMirror {
  @apply outline-none;
}

.ProseMirror p {
  @apply mb-4 leading-relaxed;
}

.ProseMirror h1 {
  @apply text-2xl font-bold mb-4 mt-8;
}

.ProseMirror h2 {
  @apply text-xl font-semibold mb-3 mt-6;
}

.ProseMirror h3 {
  @apply text-lg font-medium mb-2 mt-4;
}

.ProseMirror ul, .ProseMirror ol {
  @apply ml-6 mb-4;
}

.ProseMirror li {
  @apply mb-1;
}

.ProseMirror blockquote {
  @apply border-l-4 pl-4 my-4 italic;
  border-color: hsl(var(--muted-foreground) / 0.3);
}

.ProseMirror code {
  @apply bg-muted px-1 py-0.5 rounded text-sm font-mono;
}

.ProseMirror pre {
  @apply bg-muted p-4 rounded-lg my-4 overflow-x-auto;
}

.ProseMirror pre code {
  @apply bg-transparent p-0;
}

/* Mention styles */
.mention {
  @apply text-primary px-1 py-0.5 rounded no-underline transition-colors;
  background-color: hsl(var(--primary) / 0.1);
}

.mention:hover {
  background-color: hsl(var(--primary) / 0.2);
}

/* Block hover effects */
.block-hover:hover .block-controls {
  @apply opacity-100;
}

.block-controls {
  @apply opacity-0 transition-opacity;
}

/* Drawing canvas styles */
.drawing-canvas {
  @apply border-2 border-dashed rounded-lg;
  border-color: hsl(var(--muted-foreground) / 0.3);
  touch-action: none;
}

.drawing-canvas.active {
  @apply border-primary border-solid;
}

/* Knowledge graph styles */
.knowledge-graph {
  @apply w-full h-full;
}

.knowledge-graph svg {
  @apply w-full h-full;
}

.graph-node {
  @apply cursor-pointer;
  transition: all 0.2s ease;
}

.graph-node:hover {
  @apply drop-shadow-lg;
  transform: scale(1.1);
}

.graph-link {
  transition: stroke 0.2s ease;
  stroke: hsl(var(--muted-foreground) / 0.4);
}

.graph-link.highlighted {
  @apply stroke-primary;
}

/* Touch optimizations for iPad */
@media (pointer: coarse) {
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  button {
    @apply min-h-[44px];
  }

  input, textarea {
    @apply min-h-[44px];
  }

  .sidebar-item {
    @apply min-h-[48px];
  }
}

/* Responsive grid for connections */
.connections-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 1rem;
}

/* Animation for insights */
.insight-enter {
  @apply opacity-0 transform translate-y-4;
}

.insight-enter-active {
  @apply opacity-100 transform translate-y-0 transition-all duration-300;
}

/* Focus ring improvements for accessibility */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2;
}

/* Loading spinner */
.spinner {
  @apply animate-spin h-4 w-4 border-2 border-t-primary rounded-full;
  border-color: hsl(var(--muted-foreground) / 0.3);
  border-top-color: hsl(var(--primary));
}

/* Floating toolbar */
.floating-toolbar {
  @apply fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-card border border-border rounded-xl shadow-lg z-50;
  @apply flex items-center space-x-2 p-2;
}

/* Hide scrollbars on mobile for cleaner look */
@media (max-width: 768px) {
  .hide-scrollbar {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
}
